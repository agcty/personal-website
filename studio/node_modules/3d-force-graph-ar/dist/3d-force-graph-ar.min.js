// Version 1.6.1 3d-force-graph-ar - https://github.com/vasturiano/3d-force-graph-ar
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("three")):"function"==typeof define&&define.amd?define(["three"],e):(t=t||self).ForceGraphAR=e(t.THREE)}(this,(function(t){"use strict";function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(n){e(t,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var l=function(t){return t instanceof Function?t:"string"==typeof t?function(e){return e[t]}:function(e){return t}};function s(t,e,n){var r;function o(){var o,i,a=r.length,u=0,l=0,s=0;for(o=0;o<a;++o)u+=(i=r[o]).x||0,l+=i.y||0,s+=i.z||0;for(u=u/a-t,l=l/a-e,s=s/a-n,o=0;o<a;++o)i=r[o],u&&(i.x-=u),l&&(i.y-=l),s&&(i.z-=s)}return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),o.initialize=function(t){r=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.z=function(t){return arguments.length?(n=+t,o):n},o}function f(t,e,n){if(isNaN(e))return t;var r,o,i,a,u,l,s=t._root,f={data:n},c=t._x0,h=t._x1;if(!s)return t._root=f,t;for(;s.length;)if((a=e>=(o=(c+h)/2))?c=o:h=o,r=s,!(s=s[u=+a]))return r[u]=f,t;if(e===(i=+t._x.call(null,s.data)))return f.next=s,r?r[u]=f:t._root=f,t;do{r=r?r[u]=new Array(2):t._root=new Array(2),(a=e>=(o=(c+h)/2))?c=o:h=o}while((u=+a)==(l=+(i>=o)));return r[l]=s,r[u]=f,t}function c(t,e,n){this.node=t,this.x0=e,this.x1=n}function h(t){return t[0]}function d(t,e){var n=new p(null==e?h:e,NaN,NaN);return null==t?n:n.addAll(t)}function p(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function y(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var g=d.prototype=p.prototype;function v(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,i,a,u,l,s,f,c,h,d=t._root,p={data:r},y=t._x0,g=t._y0,v=t._x1,b=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((s=e>=(i=(y+v)/2))?y=i:v=i,(f=n>=(a=(g+b)/2))?g=a:b=a,o=d,!(d=d[c=f<<1|s]))return o[c]=p,t;if(u=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===u&&n===l)return p.next=d,o?o[c]=p:t._root=p,t;do{o=o?o[c]=new Array(4):t._root=new Array(4),(s=e>=(i=(y+v)/2))?y=i:v=i,(f=n>=(a=(g+b)/2))?g=a:b=a}while((c=f<<1|s)==(h=(l>=a)<<1|u>=i));return o[h]=d,o[c]=p,t}function b(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o}function m(t){return t[0]}function x(t){return t[1]}function _(t,e,n){var r=new w(null==e?m:e,null==n?x:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function w(t,e,n,r,o,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function k(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}g.copy=function(){var t,e,n=new p(this._x,this._x0,this._x1),r=this._root;if(!r)return n;if(!r.length)return n._root=y(r),n;for(t=[{source:r,target:n._root=new Array(2)}];r=t.pop();)for(var o=0;o<2;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(2)}):r.target[o]=y(e));return n},g.add=function(t){var e=+this._x.call(null,t);return f(this.cover(e),e,t)},g.addAll=function(t){var e,n,r=t.length,o=new Array(r),i=1/0,a=-1/0;for(e=0;e<r;++e)isNaN(n=+this._x.call(null,t[e]))||(o[e]=n,n<i&&(i=n),n>a&&(a=n));for(a<i&&(i=this._x0,a=this._x1),this.cover(i).cover(a),e=0;e<r;++e)f(this,o[e],t[e]);return this},g.cover=function(t){if(isNaN(t=+t))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{if(!(e>t||t>n))return this;var r,o,i=n-e,a=this._root;switch(o=+(t<(e+n)/2)){case 0:do{(r=new Array(2))[o]=a,a=r}while(t>(n=e+(i*=2)));break;case 1:do{(r=new Array(2))[o]=a,a=r}while((e=n-(i*=2))>t)}this._root&&this._root.length&&(this._root=a)}return this._x0=e,this._x1=n,this},g.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},g.extent=function(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},g.find=function(t,e){var n,r,o,i,a,u=this._x0,l=this._x1,s=[],f=this._root;for(f&&s.push(new c(f,u,l)),null==e?e=1/0:(u=t-e,l=t+e);i=s.pop();)if(!(!(f=i.node)||(r=i.x0)>l||(o=i.x1)<u))if(f.length){var h=(r+o)/2;s.push(new c(f[1],h,o),new c(f[0],r,h)),(a=+(t>=h))&&(i=s[s.length-1],s[s.length-1]=s[s.length-1-a],s[s.length-1-a]=i)}else{var d=Math.abs(t-+this._x.call(null,f.data));d<e&&(e=d,u=t-d,l=t+d,n=f.data)}return n},g.remove=function(t){if(isNaN(i=+this._x.call(null,t)))return this;var e,n,r,o,i,a,u,l,s,f=this._root,c=this._x0,h=this._x1;if(!f)return this;if(f.length)for(;;){if((u=i>=(a=(c+h)/2))?c=a:h=a,e=f,!(f=f[l=+u]))return this;if(!f.length)break;e[l+1&1]&&(n=e,s=l)}for(;f.data!==t;)if(r=f,!(f=f.next))return this;return(o=f.next)&&delete f.next,r?(o?r.next=o:delete r.next,this):e?(o?e[l]=o:delete e[l],(f=e[0]||e[1])&&f===(e[1]||e[0])&&!f.length&&(n?n[s]=f:this._root=f),this):(this._root=o,this)},g.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},g.root=function(){return this._root},g.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},g.visit=function(t){var e,n,r,o,i=[],a=this._root;for(a&&i.push(new c(a,this._x0,this._x1));e=i.pop();)if(!t(a=e.node,r=e.x0,o=e.x1)&&a.length){var u=(r+o)/2;(n=a[1])&&i.push(new c(n,u,o)),(n=a[0])&&i.push(new c(n,r,u))}return this},g.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new c(this._root,this._x0,this._x1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.x1,l=(a+u)/2;(i=o[0])&&n.push(new c(i,a,l)),(i=o[1])&&n.push(new c(i,l,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.x1);return this},g.x=function(t){return arguments.length?(this._x=t,this):this._x};var A=_.prototype=w.prototype;function O(t,e,n,r,o){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var i,a,u,l,s,f,c,h,d,p,y,g,v=t._root,b={data:o},m=t._x0,x=t._y0,_=t._z0,w=t._x1,k=t._y1,A=t._z1;if(!v)return t._root=b,t;for(;v.length;)if((h=e>=(a=(m+w)/2))?m=a:w=a,(d=n>=(u=(x+k)/2))?x=u:k=u,(p=r>=(l=(_+A)/2))?_=l:A=l,i=v,!(v=v[y=p<<2|d<<1|h]))return i[y]=b,t;if(s=+t._x.call(null,v.data),f=+t._y.call(null,v.data),c=+t._z.call(null,v.data),e===s&&n===f&&r===c)return b.next=v,i?i[y]=b:t._root=b,t;do{i=i?i[y]=new Array(8):t._root=new Array(8),(h=e>=(a=(m+w)/2))?m=a:w=a,(d=n>=(u=(x+k)/2))?x=u:k=u,(p=r>=(l=(_+A)/2))?_=l:A=l}while((y=p<<2|d<<1|h)==(g=(c>=l)<<2|(f>=u)<<1|s>=a));return i[g]=v,i[y]=b,t}function j(t,e,n,r,o,i,a){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=o,this.y1=i,this.z1=a}function P(t){return t[0]}function E(t){return t[1]}function M(t){return t[2]}function D(t,e,n,r){var o=new z(null==e?P:e,null==n?E:n,null==r?M:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?o:o.addAll(t)}function z(t,e,n,r,o,i,a,u,l){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=o,this._z0=i,this._x1=a,this._y1=u,this._z1=l,this._root=void 0}function N(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}A.copy=function(){var t,e,n=new w(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=k(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var o=0;o<4;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(4)}):r.target[o]=k(e));return n},A.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return v(this.cover(e,n),e,n,t)},A.addAll=function(t){var e,n,r,o,i=t.length,a=new Array(i),u=new Array(i),l=1/0,s=1/0,f=-1/0,c=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=r,u[n]=o,r<l&&(l=r),r>f&&(f=r),o<s&&(s=o),o>c&&(c=o));if(l>f||s>c)return this;for(this.cover(l,s).cover(f,c),n=0;n<i;++n)v(this,a[n],u[n],t[n]);return this},A.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var a,u,l=o-n,s=this._root;n>t||t>=o||r>e||e>=i;)switch(u=(e<r)<<1|t<n,(a=new Array(4))[u]=s,s=a,l*=2,u){case 0:o=n+l,i=r+l;break;case 1:n=o-l,i=r+l;break;case 2:o=n+l,r=i-l;break;case 3:n=o-l,r=i-l}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this},A.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},A.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},A.find=function(t,e,n){var r,o,i,a,u,l,s,f=this._x0,c=this._y0,h=this._x1,d=this._y1,p=[],y=this._root;for(y&&p.push(new b(y,f,c,h,d)),null==n?n=1/0:(f=t-n,c=e-n,h=t+n,d=e+n,n*=n);l=p.pop();)if(!(!(y=l.node)||(o=l.x0)>h||(i=l.y0)>d||(a=l.x1)<f||(u=l.y1)<c))if(y.length){var g=(o+a)/2,v=(i+u)/2;p.push(new b(y[3],g,v,a,u),new b(y[2],o,v,g,u),new b(y[1],g,i,a,v),new b(y[0],o,i,g,v)),(s=(e>=v)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-s],p[p.length-1-s]=l)}else{var m=t-+this._x.call(null,y.data),x=e-+this._y.call(null,y.data),_=m*m+x*x;if(_<n){var w=Math.sqrt(n=_);f=t-w,c=e-w,h=t+w,d=e+w,r=y.data}}return r},A.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,o,i,a,u,l,s,f,c,h,d=this._root,p=this._x0,y=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((s=i>=(u=(p+g)/2))?p=u:g=u,(f=a>=(l=(y+v)/2))?y=l:v=l,e=d,!(d=d[c=f<<1|s]))return this;if(!d.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(n=e,h=c)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(o=d.next)&&delete d.next,r?(o?r.next=o:delete r.next,this):e?(o?e[c]=o:delete e[c],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=o,this)},A.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},A.root=function(){return this._root},A.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},A.visit=function(t){var e,n,r,o,i,a,u=[],l=this._root;for(l&&u.push(new b(l,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(l=e.node,r=e.x0,o=e.y0,i=e.x1,a=e.y1)&&l.length){var s=(r+i)/2,f=(o+a)/2;(n=l[3])&&u.push(new b(n,s,f,i,a)),(n=l[2])&&u.push(new b(n,r,f,s,a)),(n=l[1])&&u.push(new b(n,s,o,i,f)),(n=l[0])&&u.push(new b(n,r,o,s,f))}return this},A.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.y0,l=e.x1,s=e.y1,f=(a+l)/2,c=(u+s)/2;(i=o[0])&&n.push(new b(i,a,u,f,c)),(i=o[1])&&n.push(new b(i,f,u,l,c)),(i=o[2])&&n.push(new b(i,a,c,f,s)),(i=o[3])&&n.push(new b(i,f,c,l,s))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},A.x=function(t){return arguments.length?(this._x=t,this):this._x},A.y=function(t){return arguments.length?(this._y=t,this):this._y};var C=D.prototype=z.prototype;function T(t){return function(){return t}}function S(){return 1e-6*(Math.random()-.5)}function q(t){return t.index}function L(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function R(t){var e,n,r,o,i,a,u=q,l=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},s=T(30),f=1;function c(r){for(var i=0,u=t.length;i<f;++i)for(var l,s,c,h,d,p=0,y=0,g=0,v=0;p<u;++p)s=(l=t[p]).source,y=(c=l.target).x+c.vx-s.x-s.vx||S(),o>1&&(g=c.y+c.vy-s.y-s.vy||S()),o>2&&(v=c.z+c.vz-s.z-s.vz||S()),y*=h=((h=Math.sqrt(y*y+g*g+v*v))-n[p])/h*r*e[p],g*=h,v*=h,c.vx-=y*(d=a[p]),o>1&&(c.vy-=g*d),o>2&&(c.vz-=v*d),s.vx+=y*(d=1-d),o>1&&(s.vy+=g*d),o>2&&(s.vz+=v*d)}function h(){if(r){var o,l,s=r.length,f=t.length,c=new Map(r.map((t,e)=>[u(t,e,r),t]));for(o=0,i=new Array(s);o<f;++o)(l=t[o]).index=o,"object"!=typeof l.source&&(l.source=L(c,l.source)),"object"!=typeof l.target&&(l.target=L(c,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(o=0,a=new Array(f);o<f;++o)l=t[o],a[o]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);e=new Array(f),d(),n=new Array(f),p()}}function d(){if(r)for(var n=0,o=t.length;n<o;++n)e[n]=+l(t[n],n,t)}function p(){if(r)for(var e=0,o=t.length;e<o;++e)n[e]=+s(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t,e){r=t,o=e,h()},c.links=function(e){return arguments.length?(t=e,h(),c):t},c.id=function(t){return arguments.length?(u=t,c):u},c.iterations=function(t){return arguments.length?(f=+t,c):f},c.strength=function(t){return arguments.length?(l="function"==typeof t?t:T(+t),d(),c):l},c.distance=function(t){return arguments.length?(s="function"==typeof t?t:T(+t),p(),c):s},c}C.copy=function(){var t,e,n=new z(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=N(r),n;for(t=[{source:r,target:n._root=new Array(8)}];r=t.pop();)for(var o=0;o<8;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(8)}):r.target[o]=N(e));return n},C.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return O(this.cover(e,n,r),e,n,r,t)},C.addAll=function(t){var e,n,r,o,i,a=t.length,u=new Array(a),l=new Array(a),s=new Array(a),f=1/0,c=1/0,h=1/0,d=-1/0,p=-1/0,y=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||isNaN(i=+this._z.call(null,e))||(u[n]=r,l[n]=o,s[n]=i,r<f&&(f=r),r>d&&(d=r),o<c&&(c=o),o>p&&(p=o),i<h&&(h=i),i>y&&(y=i));for(d<f&&(f=this._x0,d=this._x1),p<c&&(c=this._y0,p=this._y1),y<h&&(h=this._z0,y=this._z1),this.cover(f,c,h).cover(d,p,y),n=0;n<a;++n)O(this,u[n],l[n],s[n],t[n]);return this},C.cover=function(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,o=this._y0,i=this._z0,a=this._x1,u=this._y1,l=this._z1;if(isNaN(r))a=(r=Math.floor(t))+1,u=(o=Math.floor(e))+1,l=(i=Math.floor(n))+1;else{if(!(r>t||t>a||o>e||e>u||i>n||n>l))return this;var s,f,c=a-r,h=this._root;switch(f=(n<(i+l)/2)<<2|(e<(o+u)/2)<<1|t<(r+a)/2){case 0:do{(s=new Array(8))[f]=h,h=s}while(u=o+(c*=2),l=i+c,t>(a=r+c)||e>u||n>l);break;case 1:do{(s=new Array(8))[f]=h,h=s}while(u=o+(c*=2),l=i+c,(r=a-c)>t||e>u||n>l);break;case 2:do{(s=new Array(8))[f]=h,h=s}while(o=u-(c*=2),l=i+c,t>(a=r+c)||o>e||n>l);break;case 3:do{(s=new Array(8))[f]=h,h=s}while(o=u-(c*=2),l=i+c,(r=a-c)>t||o>e||n>l);break;case 4:do{(s=new Array(8))[f]=h,h=s}while(u=o+(c*=2),i=l-c,t>(a=r+c)||e>u||i>n);break;case 5:do{(s=new Array(8))[f]=h,h=s}while(u=o+(c*=2),i=l-c,(r=a-c)>t||e>u||i>n);break;case 6:do{(s=new Array(8))[f]=h,h=s}while(o=u-(c*=2),i=l-c,t>(a=r+c)||o>e||i>n);break;case 7:do{(s=new Array(8))[f]=h,h=s}while(o=u-(c*=2),i=l-c,(r=a-c)>t||o>e||i>n)}this._root&&this._root.length&&(this._root=h)}return this._x0=r,this._y0=o,this._z0=i,this._x1=a,this._y1=u,this._z1=l,this},C.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},C.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},C.find=function(t,e,n,r){var o,i,a,u,l,s,f,c,h,d=this._x0,p=this._y0,y=this._z0,g=this._x1,v=this._y1,b=this._z1,m=[],x=this._root;for(x&&m.push(new j(x,d,p,y,g,v,b)),null==r?r=1/0:(d=t-r,p=e-r,y=n-r,g=t+r,v=e+r,b=n+r,r*=r);c=m.pop();)if(!(!(x=c.node)||(i=c.x0)>g||(a=c.y0)>v||(u=c.z0)>b||(l=c.x1)<d||(s=c.y1)<p||(f=c.z1)<y))if(x.length){var _=(i+l)/2,w=(a+s)/2,k=(u+f)/2;m.push(new j(x[7],_,w,k,l,s,f),new j(x[6],i,w,k,_,s,f),new j(x[5],_,a,k,l,w,f),new j(x[4],i,a,k,_,w,f),new j(x[3],_,w,u,l,s,k),new j(x[2],i,w,u,_,s,k),new j(x[1],_,a,u,l,w,k),new j(x[0],i,a,u,_,w,k)),(h=(n>=k)<<2|(e>=w)<<1|t>=_)&&(c=m[m.length-1],m[m.length-1]=m[m.length-1-h],m[m.length-1-h]=c)}else{var A=t-+this._x.call(null,x.data),O=e-+this._y.call(null,x.data),P=n-+this._z.call(null,x.data),E=A*A+O*O+P*P;if(E<r){var M=Math.sqrt(r=E);d=t-M,p=e-M,y=n-M,g=t+M,v=e+M,b=n+M,o=x.data}}return o},C.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t))||isNaN(u=+this._z.call(null,t)))return this;var e,n,r,o,i,a,u,l,s,f,c,h,d,p,y,g=this._root,v=this._x0,b=this._y0,m=this._z0,x=this._x1,_=this._y1,w=this._z1;if(!g)return this;if(g.length)for(;;){if((c=i>=(l=(v+x)/2))?v=l:x=l,(h=a>=(s=(b+_)/2))?b=s:_=s,(d=u>=(f=(m+w)/2))?m=f:w=f,e=g,!(g=g[p=d<<2|h<<1|c]))return this;if(!g.length)break;(e[p+1&7]||e[p+2&7]||e[p+3&7]||e[p+4&7]||e[p+5&7]||e[p+6&7]||e[p+7&7])&&(n=e,y=p)}for(;g.data!==t;)if(r=g,!(g=g.next))return this;return(o=g.next)&&delete g.next,r?(o?r.next=o:delete r.next,this):e?(o?e[p]=o:delete e[p],(g=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&g===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!g.length&&(n?n[y]=g:this._root=g),this):(this._root=o,this)},C.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},C.root=function(){return this._root},C.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},C.visit=function(t){var e,n,r,o,i,a,u,l,s=[],f=this._root;for(f&&s.push(new j(f,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=s.pop();)if(!t(f=e.node,r=e.x0,o=e.y0,i=e.z0,a=e.x1,u=e.y1,l=e.z1)&&f.length){var c=(r+a)/2,h=(o+u)/2,d=(i+l)/2;(n=f[7])&&s.push(new j(n,c,h,d,a,u,l)),(n=f[6])&&s.push(new j(n,r,h,d,c,u,l)),(n=f[5])&&s.push(new j(n,c,o,d,a,h,l)),(n=f[4])&&s.push(new j(n,r,o,d,c,h,l)),(n=f[3])&&s.push(new j(n,c,h,i,a,u,d)),(n=f[2])&&s.push(new j(n,r,h,i,c,u,d)),(n=f[1])&&s.push(new j(n,c,o,i,a,h,d)),(n=f[0])&&s.push(new j(n,r,o,i,c,h,d))}return this},C.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new j(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.y0,l=e.z0,s=e.x1,f=e.y1,c=e.z1,h=(a+s)/2,d=(u+f)/2,p=(l+c)/2;(i=o[0])&&n.push(new j(i,a,u,l,h,d,p)),(i=o[1])&&n.push(new j(i,h,u,l,s,d,p)),(i=o[2])&&n.push(new j(i,a,d,l,h,f,p)),(i=o[3])&&n.push(new j(i,h,d,l,s,f,p)),(i=o[4])&&n.push(new j(i,a,u,p,h,d,c)),(i=o[5])&&n.push(new j(i,h,u,p,s,d,c)),(i=o[6])&&n.push(new j(i,a,d,p,h,f,c)),(i=o[7])&&n.push(new j(i,h,d,p,s,f,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this},C.x=function(t){return arguments.length?(this._x=t,this):this._x},C.y=function(t){return arguments.length?(this._y=t,this):this._y},C.z=function(t){return arguments.length?(this._z=t,this):this._z};var B={value:function(){}};function I(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new F(r)}function F(t){this._=t}function U(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function V(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function G(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=B,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}F.prototype=I.prototype={constructor:F,on:function(t,e){var n,r=this._,o=U(t+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<a;)if(n=(t=o[i]).type)r[n]=G(r[n],t.name,e);else if(null==e)for(n in r)r[n]=G(r[n],t.name,null);return this}for(;++i<a;)if((n=(t=o[i]).type)&&(n=V(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new F(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var H,X,W=0,Y=0,$=0,Q=0,J=0,Z=0,K="object"==typeof performance&&performance.now?performance:Date,tt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function et(){return J||(tt(nt),J=K.now()+Z)}function nt(){J=0}function rt(){this._call=this._time=this._next=null}function ot(t,e,n){var r=new rt;return r.restart(t,e,n),r}function it(){J=(Q=K.now())+Z,W=Y=0;try{!function(){et(),++W;for(var t,e=H;e;)(t=J-e._time)>=0&&e._call.call(null,t),e=e._next;--W}()}finally{W=0,function(){var t,e,n=H,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:H=e);X=t,ut(r)}(),J=0}}function at(){var t=K.now(),e=t-Q;e>1e3&&(Z-=e,Q=t)}function ut(t){W||(Y&&(Y=clearTimeout(Y)),t-J>24?(t<1/0&&(Y=setTimeout(it,t-K.now()-Z)),$&&($=clearInterval($))):($||(Q=K.now(),$=setInterval(at,1e3)),W=1,tt(it)))}rt.prototype=ot.prototype={constructor:rt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?et():+n)+(null==e?0:+e),this._next||X===this||(X?X._next=this:H=this,X=this),this._call=t,this._time=n,ut()},stop:function(){this._call&&(this._call=null,this._time=1/0,ut())}};function lt(t){return t.x}function st(t){return t.y}function ft(t){return t.z}var ct=Math.PI*(3-Math.sqrt(5)),ht=20*Math.PI/(9+Math.sqrt(221));function dt(t,e){e=e||2;var n,r=Math.min(3,Math.max(1,Math.round(e))),o=1,i=.001,a=1-Math.pow(i,1/300),u=0,l=.6,s=new Map,f=ot(h),c=I("tick","end");function h(){d(),c.call("tick",n),o<i&&(f.stop(),c.call("end",n))}function d(e){var i,f,c=t.length;void 0===e&&(e=1);for(var h=0;h<e;++h)for(o+=(u-o)*a,s.forEach((function(t){t(o)})),i=0;i<c;++i)null==(f=t[i]).fx?f.x+=f.vx*=l:(f.x=f.fx,f.vx=0),r>1&&(null==f.fy?f.y+=f.vy*=l:(f.y=f.fy,f.vy=0)),r>2&&(null==f.fz?f.z+=f.vz*=l:(f.z=f.fz,f.vz=0));return n}function p(){for(var e,n=0,o=t.length;n<o;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),null!=e.fz&&(e.z=e.fz),isNaN(e.x)||r>1&&isNaN(e.y)||r>2&&isNaN(e.z)){var i=10*(r>2?Math.cbrt(n):r>1?Math.sqrt(n):n),a=n*ct,u=n*ht;1===r?e.x=i:2===r?(e.x=i*Math.cos(a),e.y=i*Math.sin(a)):(e.x=i*Math.sin(a)*Math.cos(u),e.y=i*Math.cos(a),e.z=i*Math.sin(a)*Math.sin(u))}(isNaN(e.vx)||r>1&&isNaN(e.vy)||r>2&&isNaN(e.vz))&&(e.vx=0,r>1&&(e.vy=0),r>2&&(e.vz=0))}}function y(e){return e.initialize&&e.initialize(t,r),e}return null==t&&(t=[]),p(),n={tick:d,restart:function(){return f.restart(h),n},stop:function(){return f.stop(),n},numDimensions:function(t){return arguments.length?(r=Math.min(3,Math.max(1,Math.round(t))),s.forEach(y),n):r},nodes:function(e){return arguments.length?(t=e,p(),s.forEach(y),n):t},alpha:function(t){return arguments.length?(o=+t,n):o},alphaMin:function(t){return arguments.length?(i=+t,n):i},alphaDecay:function(t){return arguments.length?(a=+t,n):+a},alphaTarget:function(t){return arguments.length?(u=+t,n):u},velocityDecay:function(t){return arguments.length?(l=1-t,n):1-l},force:function(t,e){return arguments.length>1?(null==e?s.delete(t):s.set(t,y(e)),n):s.get(t)},find:function(){var e,n,o,i,a,u,l=Array.prototype.slice.call(arguments),s=l.shift()||0,f=(r>1?l.shift():null)||0,c=(r>2?l.shift():null)||0,h=l.shift()||1/0,d=0,p=t.length;for(h*=h,d=0;d<p;++d)(i=(e=s-(a=t[d]).x)*e+(n=f-(a.y||0))*n+(o=c-(a.z||0))*o)<h&&(u=a,h=i);return u},on:function(t,e){return arguments.length>1?(c.on(t,e),n):c.on(t)}}}function pt(){var t,e,n,r,o,i=T(-30),a=1,u=1/0,l=.81;function s(o){var i,a=t.length,u=(1===e?d(t,lt):2===e?_(t,lt,st):3===e?D(t,lt,st,ft):null).visitAfter(c);for(r=o,i=0;i<a;++i)n=t[i],u.visit(h)}function f(){if(t){var e,n,r=t.length;for(o=new Array(r),e=0;e<r;++e)n=t[e],o[n.index]=+i(n,e,t)}}function c(t){var n,r,i,a,u,l,s=0,f=0,c=t.length;if(c){for(i=a=u=l=0;l<c;++l)(n=t[l])&&(r=Math.abs(n.value))&&(s+=n.value,f+=r,i+=r*(n.x||0),a+=r*(n.y||0),u+=r*(n.z||0));s*=Math.sqrt(4/c),t.x=i/f,e>1&&(t.y=a/f),e>2&&(t.z=u/f)}else{(n=t).x=n.data.x,e>1&&(n.y=n.data.y),e>2&&(n.z=n.data.z);do{s+=o[n.data.index]}while(n=n.next)}t.value=s}function h(t,i,s,f,c){if(!t.value)return!0;var h=[s,f,c][e-1],d=t.x-n.x,p=e>1?t.y-n.y:0,y=e>2?t.z-n.z:0,g=h-i,v=d*d+p*p+y*y;if(g*g/l<v)return v<u&&(0===d&&(v+=(d=S())*d),e>1&&0===p&&(v+=(p=S())*p),e>2&&0===y&&(v+=(y=S())*y),v<a&&(v=Math.sqrt(a*v)),n.vx+=d*t.value*r/v,e>1&&(n.vy+=p*t.value*r/v),e>2&&(n.vz+=y*t.value*r/v)),!0;if(!(t.length||v>=u)){(t.data!==n||t.next)&&(0===d&&(v+=(d=S())*d),e>1&&0===p&&(v+=(p=S())*p),e>2&&0===y&&(v+=(y=S())*y),v<a&&(v=Math.sqrt(a*v)));do{t.data!==n&&(g=o[t.data.index]*r/v,n.vx+=d*g,e>1&&(n.vy+=p*g),e>2&&(n.vz+=y*g))}while(t=t.next)}}return s.initialize=function(n,r){t=n,e=r,f()},s.strength=function(t){return arguments.length?(i="function"==typeof t?t:T(+t),f(),s):i},s.distanceMin=function(t){return arguments.length?(a=t*t,s):Math.sqrt(a)},s.distanceMax=function(t){return arguments.length?(u=t*t,s):Math.sqrt(u)},s.theta=function(t){return arguments.length?(l=t*t,s):Math.sqrt(l)},s}var yt=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,o){if("function"!=typeof r)throw new Error("callback is expected to be a function");var i=e[n];return i||(i=e[n]=[]),i.push({callback:r,ctx:o}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n])if("function"!=typeof r)delete e[n];else for(var o=e[n],i=0;i<o.length;++i)o[i].callback===r&&o.splice(i,1);return t},fire:function(n){var r,o=e[n];if(!o)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var a=o[i];a.callback.apply(a.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t};var gt=function(t){"uniqueLinkId"in(t=t||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId);void 0===t.multigraph&&(t.multigraph=!1);if("function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=[],r={},o=0,i=t.multigraph?function(t,e,n){var o=_t(t,e),i=r.hasOwnProperty(o);if(i||x(t,e)){i||(r[o]=0);var a="@"+ ++r[o];o=_t(t+a,e+a)}return new xt(t,e,n,o)}:function(t,e,n){var r=_t(t,e);return new xt(t,e,n,r)},a=[],u=_,l=_,s=_,f=_,c={addNode:p,addLink:function(t,e,r){s();var o=y(t)||p(t),a=y(e)||p(e),l=i(t,e,r);n.push(l),mt(o,l),t!==e&&mt(a,l);return u(l,"add"),f(),l},removeLink:m,removeNode:g,getNode:y,getNodeCount:v,getLinkCount:b,getLinksCount:b,getNodesCount:v,getLinks:function(t){var e=y(t);return e?e.links:null},forEachNode:A,forEachLinkedNode:function(t,n,r){var o=y(t);if(o&&o.links&&"function"==typeof n)return r?function(t,n,r){for(var o=0;o<t.length;++o){var i=t[o];if(i.fromId===n&&r(e.get(i.toId),i))return!0}}(o.links,t,n):function(t,n,r){for(var o=0;o<t.length;++o){var i=t[o],a=i.fromId===n?i.toId:i.fromId;if(r(e.get(a),i))return!0}}(o.links,t,n)},forEachLink:function(t){var e,r;if("function"==typeof t)for(e=0,r=n.length;e<r;++e)t(n[e])},beginUpdate:s,endUpdate:f,clear:function(){s(),A((function(t){g(t.id)})),f()},hasLink:x,hasNode:y,getLink:x};return yt(c),function(){var t=c.on;c.on=function(){return c.beginUpdate=s=w,c.endUpdate=f=k,u=h,l=d,c.on=t,t.apply(c,arguments)}}(),c;function h(t,e){a.push({link:t,changeType:e})}function d(t,e){a.push({node:t,changeType:e})}function p(t,n){if(void 0===t)throw new Error("Invalid node identifier");s();var r=y(t);return r?(r.data=n,l(r,"update")):(r=new bt(t,n),l(r,"add")),e.set(t,r),f(),r}function y(t){return e.get(t)}function g(t){var n=y(t);if(!n)return!1;s();var r=n.links;if(r){n.links=null;for(var o=0;o<r.length;++o)m(r[o])}return e.delete(t),l(n,"remove"),f(),!0}function v(){return e.size}function b(){return n.length}function m(t){if(!t)return!1;var e=vt(t,n);if(e<0)return!1;s(),n.splice(e,1);var r=y(t.fromId),o=y(t.toId);return r&&(e=vt(t,r.links))>=0&&r.links.splice(e,1),o&&(e=vt(t,o.links))>=0&&o.links.splice(e,1),u(t,"remove"),f(),!0}function x(t,e){var n,r=y(t);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var o=r.links[n];if(o.fromId===t&&o.toId===e)return o}return null}function _(){}function w(){o+=1}function k(){0===(o-=1)&&a.length>0&&(c.fire("changed",a),a.length=0)}function A(t){if("function"!=typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);for(var n=e.values(),r=n.next();!r.done;){if(t(r.value))return!0;r=n.next()}}};function vt(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,r=e.length;for(n=0;n<r;n+=1)if(e[n]===t)return n;return-1}function bt(t,e){this.id=t,this.links=null,this.data=e}function mt(t,e){t.links?t.links.push(e):t.links=[e]}function xt(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function _t(t,e){return t.toString()+"👉 "+e.toString()}var wt=function(t,e,n,r){this.from=t,this.to=e,this.length=n,this.coeff=r};var kt=function(t,e,n){if("[object Array]"===Object.prototype.toString.call(n))for(var r=0;r<n.length;++r)At(t,e,n[r]);else for(var o in t)At(t,e,o)};function At(t,e,n){if(t.hasOwnProperty(n)){if("function"==typeof e[n])return;e[n]=function(r){return void 0!==r?(t[n]=r,e):t[n]}}}var Ot=function t(e,n){var r;e||(e={});if(n)for(r in n)if(n.hasOwnProperty(r)){var o=e.hasOwnProperty(r),i=typeof n[r];!o||typeof e[r]!==i?e[r]=n[r]:"object"===i&&(e[r]=t(e[r],n[r]))}return e};function jt(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var Pt=jt((function(t){function e(t){return new n("number"==typeof t?t:+new Date)}function n(t){this.seed=t}function r(){var t=this.seed;return t=4294967295&(3042594569^(t=(t=4294967295&((t=(t=4294967295&(3345072700^(t=t+2127912214+(t<<12)&4294967295)^t>>>19))+374761393+(t<<5)&4294967295)+3550635116^t<<9))+4251993797+(t<<3)&4294967295)^t>>>16),this.seed=t,(268435455&t)/268435456}t.exports=e,t.exports.random=e,t.exports.randomIterator=function(t,n){var r=n||e();if("function"!=typeof r.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var n,o,i;for(n=t.length-1;n>0;--n)o=r.next(n+1),i=t[o],t[o]=t[n],t[n]=i,e(i);t.length&&e(t[0])},shuffle:function(){var e,n,o;for(e=t.length-1;e>0;--e)n=r.next(e+1),o=t[n],t[n]=t[e],t[e]=o;return t}}},n.prototype.next=function(t){return Math.floor(this.nextDouble()*t)},n.prototype.nextDouble=r,n.prototype.uniform=r,n.prototype.gaussian=function(){var t,e,n;do{e=2*this.nextDouble()-1,n=2*this.nextDouble()-1,t=e*e+n*n}while(t>=1||0===t);return e*Math.sqrt(-2*Math.log(t)/t)}})),Et=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0},Mt=Dt;function Dt(){this.stack=[],this.popIdx=0}function zt(t,e){this.node=t,this.body=e}Dt.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new zt(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};var Nt=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return n<1e-8&&r<1e-8},Ct=function(t){(t=t||{}).gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var e=Pt.random(1984),n=Et,r=Mt,o=Nt,i=t.gravity,a=[],u=new r,l=t.theta,s=[],f=0,c=h();return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MIN_VALUE,a=t.length;e=a;for(;e--;){var u=t[e].pos.x,l=t[e].pos.y;u<n&&(n=u),u>o&&(o=u),l<r&&(r=l),l>i&&(i=l)}var s=o-n,p=i-r;s>p?i=r+s:o=n+p;f=0,(c=h()).left=n,c.right=o,c.top=r,c.bottom=i,(e=a-1)>=0&&(c.body=t[e]);for(;e--;)d(t[e])},getRoot:function(){return c},updateBodyForce:function(t){var n,r,o,u,s=a,f=0,h=0,d=1,p=0,y=1;s[0]=c;for(;d;){var g=s[p],v=g.body;d-=1,p+=1;var b=v!==t;v&&b?(r=v.pos.x-t.pos.x,o=v.pos.y-t.pos.y,0===(u=Math.sqrt(r*r+o*o))&&(r=(e.nextDouble()-.5)/50,o=(e.nextDouble()-.5)/50,u=Math.sqrt(r*r+o*o)),n=i*v.mass*t.mass/(u*u*u),f+=n*r,h+=n*o):b&&(r=g.massX/g.mass-t.pos.x,o=g.massY/g.mass-t.pos.y,0===(u=Math.sqrt(r*r+o*o))&&(r=(e.nextDouble()-.5)/50,o=(e.nextDouble()-.5)/50,u=Math.sqrt(r*r+o*o)),(g.right-g.left)/u<l?(n=i*g.mass*t.mass/(u*u*u),f+=n*r,h+=n*o):(g.quad0&&(s[y]=g.quad0,d+=1,y+=1),g.quad1&&(s[y]=g.quad1,d+=1,y+=1),g.quad2&&(s[y]=g.quad2,d+=1,y+=1),g.quad3&&(s[y]=g.quad3,d+=1,y+=1)))}t.force.x+=f,t.force.y+=h},options:function(t){return t?("number"==typeof t.gravity&&(i=t.gravity),"number"==typeof t.theta&&(l=t.theta),this):{gravity:i,theta:l}}};function h(){var t=s[f];return t?(t.quad0=null,t.quad1=null,t.quad2=null,t.quad3=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0):(t=new n,s[f]=t),++f,t}function d(t){for(u.reset(),u.push(c,t);!u.isEmpty();){var n=u.pop(),r=n.node,i=n.body;if(r.body){var a=r.body;if(r.body=null,o(a.pos,i.pos)){var l=3;do{var s=e.nextDouble(),f=(r.right-r.left)*s,d=(r.bottom-r.top)*s;a.pos.x=r.left+f,a.pos.y=r.top+d,l-=1}while(l>0&&o(a.pos,i.pos));if(0===l&&o(a.pos,i.pos))return}u.push(r,a),u.push(r,i)}else{var p=i.pos.x,y=i.pos.y;r.mass=r.mass+i.mass,r.massX=r.massX+i.mass*p,r.massY=r.massY+i.mass*y;var g=0,v=r.left,b=(r.right+v)/2,m=r.top,x=(r.bottom+m)/2;p>b&&(g+=1,v=b,b=r.right),y>x&&(g+=2,m=x,x=r.bottom);var _=Tt(r,g);_?u.push(_,i):((_=h()).left=v,_.top=m,_.right=b,_.bottom=x,_.body=i,St(r,g,_))}}}};function Tt(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:null}function St(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e&&(t.quad3=n)}var qt=function(t,e){var n=Pt.random(42),r={x1:0,y1:0,x2:0,y2:0};return{box:r,update:function(){var e=t.length;if(0===e)return;var n=Number.MAX_VALUE,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MIN_VALUE;for(;e--;){var u=t[e];u.isPinned?(u.pos.x=u.prevPos.x,u.pos.y=u.prevPos.y):(u.prevPos.x=u.pos.x,u.prevPos.y=u.pos.y),u.pos.x<n&&(n=u.pos.x),u.pos.x>i&&(i=u.pos.x),u.pos.y<o&&(o=u.pos.y),u.pos.y>a&&(a=u.pos.y)}r.x1=n,r.x2=i,r.y1=o,r.y2=a},reset:function(){r.x1=r.y1=0,r.x2=r.y2=0},getBestNewPosition:function(t){var o=r,i=0,a=0;if(t.length){for(var u=0;u<t.length;++u)i+=t[u].pos.x,a+=t[u].pos.y;i/=t.length,a/=t.length}else i=(o.x1+o.x2)/2,a=(o.y1+o.y2)/2;var l=e.springLength;return{x:i+n.next(l)-l/2,y:a+n.next(l)-l/2}}}},Lt=function(t){var e={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y}};return kt(t=Ot(t,{dragCoeff:.02}),e,["dragCoeff"]),e},Rt=function(t){var e=Ot,n=Pt.random(42),r={update:function(e){var r=e.from,o=e.to,i=e.length<0?t.springLength:e.length,a=o.pos.x-r.pos.x,u=o.pos.y-r.pos.y,l=Math.sqrt(a*a+u*u);0===l&&(a=(n.nextDouble()-.5)/50,u=(n.nextDouble()-.5)/50,l=Math.sqrt(a*a+u*u));var s=l-i,f=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*s/l;r.force.x+=f*a,r.force.y+=f*u,o.force.x-=f*a,o.force.y-=f*u}};return kt(t=e(t,{springCoeff:2e-4,springLength:80}),r,["springCoeff","springLength"]),r},Bt=function(t,e){var n,r=0,o=0,i=0,a=0,u=t.length;if(0===u)return 0;for(n=0;n<u;++n){var l=t[n],s=e/l.mass;l.velocity.x+=s*l.force.x,l.velocity.y+=s*l.force.y;var f=l.velocity.x,c=l.velocity.y,h=Math.sqrt(f*f+c*c);h>1&&(l.velocity.x=f/h,l.velocity.y=c/h),r=e*l.velocity.x,i=e*l.velocity.y,l.pos.x+=r,l.pos.y+=i,o+=Math.abs(r),a+=Math.abs(i)}return(o*o+a*a)/u};var It={Body:Ft,Vector2d:Ut,Body3d:Vt,Vector3d:Gt};function Ft(t,e){this.pos=new Ut(t,e),this.prevPos=new Ut(t,e),this.force=new Ut,this.velocity=new Ut,this.mass=1}function Ut(t,e){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0)}function Vt(t,e,n){this.pos=new Gt(t,e,n),this.prevPos=new Gt(t,e,n),this.force=new Gt,this.velocity=new Gt,this.mass=1}function Gt(t,e,n){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0,this.z="number"==typeof t.z?t.z:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof n?n:0)}Ft.prototype.setPosition=function(t,e){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e},Ut.prototype.reset=function(){this.x=this.y=0},Vt.prototype.setPosition=function(t,e,n){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e,this.prevPos.z=this.pos.z=n},Gt.prototype.reset=function(){this.x=this.y=this.z=0};var Ht=function(t){return new It.Body(t)},Xt=function(t){var e=wt,n=kt,r=yt,o=(t=Ot(t,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20})).createQuadTree||Ct,i=t.createBounds||qt,a=t.createDragForce||Lt,u=t.createSpringForce||Rt,l=t.integrator||Bt,s=t.createBody||Ht,f=[],c=[],h=o(t),d=i(f,t),p=u(t),y=a(t),g=!0,v={bodies:f,quadTree:h,springs:c,settings:t,step:function(){!function(){var t,e=f.length;if(e)for(h.insertBodies(f);e--;)(t=f[e]).isPinned||(t.force.reset(),h.updateBodyForce(t),y.update(t));e=c.length;for(;e--;)p.update(c[e])}();var e=l(f,t.timeStep);return d.update(),e},addBody:function(t){if(!t)throw new Error("Body is required");return f.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=s(t);return f.push(e),e},removeBody:function(t){if(t){var e=f.indexOf(t);if(!(e<0))return f.splice(e,1),0===f.length&&d.reset(),!0}},addSpring:function(t,n,r,o){if(!t||!n)throw new Error("Cannot add null spring to force simulator");"number"!=typeof r&&(r=-1);var i=new e(t,n,r,o>=0?o:-1);return c.push(i),i},getTotalMovement:function(){return 0},removeSpring:function(t){if(t){var e=c.indexOf(t);return e>-1?(c.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return d.getBestNewPosition(t)},getBBox:function(){return g&&(d.update(),g=!1),d.box},invalidateBBox:function(){g=!0},gravity:function(e){return void 0!==e?(t.gravity=e,h.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,h.options({theta:e}),this):t.theta}};return n(t,v),r(v),v};var Wt=function(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var n=Xt(e),r=function(e){var n=t.getLinks(e);return n?1+n.length/3:1};e&&"function"==typeof e.nodeMass&&(r=e.nodeMass);var o=new Map,i={},a=0,u=n.settings.springTransform||$t;a=0,t.forEachNode((function(t){c(t.id),a+=1})),t.forEachLink(d),t.on("changed",f);var l=!1,s={step:function(){if(0===a)return!0;var t=n.step();s.lastMove=t,s.fire("step");var e,r=t/a<=.01;return l!==r&&(l=r,e=r,s.fire("stable",e)),r},getNodePosition:function(t){return g(t).pos},setNodePosition:function(t){var e=g(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1)),n.invalidateBBox()},getLinkPosition:function(t){var e=i[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return n.getBBox()},forEachBody:function(t){o.forEach((function(e,n){t(e,n)}))},pinNode:function(t,e){g(t.id).isPinned=!!e},isNodePinned:function(t){return g(t.id).isPinned},dispose:function(){t.off("changed",f),s.fire("disposed")},getBody:function(t){return o.get(t)},getSpring:function(e,n){var r;if(void 0===n)r="object"!=typeof e?e:e.id;else{var o=t.hasLink(e,n);if(!o)return;r=o.id}return i[r]},simulator:n,graph:t,lastMove:0};return yt(s),s;function f(e){for(var n=0;n<e.length;++n){var r=e[n];"add"===r.changeType?(r.node&&c(r.node.id),r.link&&d(r.link)):"remove"===r.changeType&&(r.node&&h(r.node),r.link&&p(r.link))}a=t.getNodesCount()}function c(e){var r=o.get(e);if(!r){var i=t.getNode(e);if(!i)throw new Error("initBody() was called with unknown node id");var a=i.position;if(!a){var u=function(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),r=0;r<n;++r){var i=t.links[r],a=i.fromId!==t.id?o.get(i.fromId):o.get(i.toId);a&&a.pos&&e.push(a)}return e}(i);a=n.getBestNewBodyPosition(u)}(r=n.addBodyAt(a)).id=e,o.set(e,r),y(e),function(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}(i)&&(r.isPinned=!0)}}function h(t){var e=t.id,r=o.get(e);r&&(o.delete(e),n.removeBody(r))}function d(t){y(t.fromId),y(t.toId);var e=o.get(t.fromId),r=o.get(t.toId),a=n.addSpring(e,r,t.length);u(t,a),i[t.id]=a}function p(e){var r=i[e.id];if(r){var o=t.getNode(e.fromId),a=t.getNode(e.toId);o&&y(o.id),a&&y(a.id),delete i[e.id],n.removeSpring(r)}}function y(t){var e=o.get(t);if(e.mass=r(t),Number.isNaN(e.mass))throw new Error("Node mass should be a number")}function g(t){var e=o.get(t);return e||(c(t),e=o.get(t)),e}},Yt=Xt;function $t(){}Wt.simulator=Yt;var Qt=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.quad4=null,this.quad5=null,this.quad6=null,this.quad7=null,this.mass=0,this.massX=0,this.massY=0,this.massZ=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.front=0,this.back=0},Jt=Zt;function Zt(){this.stack=[],this.popIdx=0}function Kt(t,e){this.node=t,this.body=e}Zt.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new Kt(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};var te=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),o=Math.abs(t.z-e.z);return n<1e-8&&r<1e-8&&o<1e-8},ee=function(t){(t=t||{}).gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var e=Pt.random(1984),n=Qt,r=Jt,o=te,i=t.gravity,a=[],u=new r,l=t.theta,s=[],f=0,c=function(){var t=s[f];return t?(t.quad0=null,t.quad4=null,t.quad1=null,t.quad5=null,t.quad2=null,t.quad6=null,t.quad3=null,t.quad7=null,t.body=null,t.mass=t.massX=t.massY=t.massZ=0,t.left=t.right=t.top=t.bottom=t.front=t.back=0):(t=new n,s[f]=t),++f,t},h=c(),d=function(t){for(u.reset(),u.push(h,t);!u.isEmpty();){var n=u.pop(),r=n.node,i=n.body;if(r.body){var a=r.body;if(r.body=null,o(a.pos,i.pos)){var l=3;do{var s=e.nextDouble(),f=(r.right-r.left)*s,d=(r.bottom-r.top)*s,p=(r.front-r.back)*s;a.pos.x=r.left+f,a.pos.y=r.top+d,a.pos.z=r.back+p,l-=1}while(l>0&&o(a.pos,i.pos));if(0===l&&o(a.pos,i.pos))return}u.push(r,a),u.push(r,i)}else{var y=i.pos.x,g=i.pos.y,v=i.pos.z;r.mass+=i.mass,r.massX+=i.mass*y,r.massY+=i.mass*g,r.massZ+=i.mass*v;var b=0,m=r.left,x=(r.right+m)/2,_=r.top,w=(r.bottom+_)/2,k=r.back,A=(r.front+k)/2;if(y>x){b+=1;var O=m;m=x,x+=x-O}if(g>w){b+=2;var j=_;_=w,w+=w-j}if(v>A){b+=4;var P=k;A=(k=A)+(k-P)}var E=ne(r,b);E?u.push(E,i):((E=c()).left=m,E.top=_,E.right=x,E.bottom=w,E.back=k,E.front=A,E.body=i,re(r,b,E))}}};return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MIN_VALUE,u=Number.MIN_VALUE,l=t.length;for(e=l;e--;){var s=t[e].pos,p=s.x,y=s.y,g=s.z;p<n&&(n=p),p>i&&(i=p),y<r&&(r=y),y>a&&(a=y),g<o&&(o=g),g>u&&(u=g)}var v=Math.max(i-n,Math.max(a-r,u-o));for(i=n+v,a=r+v,u=o+v,f=0,(h=c()).left=n,h.right=i,h.top=r,h.bottom=a,h.back=o,h.front=u,(e=l-1)>0&&(h.body=t[e]);e--;)d(t[e])},updateBodyForce:function(t){var n,r,o,u,s,f=a,c=0,d=0,p=0,y=1,g=0,v=1;for(f[0]=h;y;){var b=f[g],m=b.body;y-=1,g+=1;var x=m!==t;m&&x?(r=m.pos.x-t.pos.x,o=m.pos.y-t.pos.y,u=m.pos.z-t.pos.z,0===(s=Math.sqrt(r*r+o*o+u*u))&&(r=(e.nextDouble()-.5)/50,o=(e.nextDouble()-.5)/50,u=(e.nextDouble()-.5)/50,s=Math.sqrt(r*r+o*o+u*u)),c+=(n=i*m.mass*t.mass/(s*s*s))*r,d+=n*o,p+=n*u):x&&(r=b.massX/b.mass-t.pos.x,o=b.massY/b.mass-t.pos.y,u=b.massZ/b.mass-t.pos.z,0===(s=Math.sqrt(r*r+o*o+u*u))&&(r=(e.nextDouble()-.5)/50,o=(e.nextDouble()-.5)/50,u=(e.nextDouble()-.5)/50,s=Math.sqrt(r*r+o*o+u*u)),(b.right-b.left)/s<l?(c+=(n=i*b.mass*t.mass/(s*s*s))*r,d+=n*o,p+=n*u):(b.quad0&&(f[v]=b.quad0,y+=1,v+=1),b.quad1&&(f[v]=b.quad1,y+=1,v+=1),b.quad2&&(f[v]=b.quad2,y+=1,v+=1),b.quad3&&(f[v]=b.quad3,y+=1,v+=1),b.quad4&&(f[v]=b.quad4,y+=1,v+=1),b.quad5&&(f[v]=b.quad5,y+=1,v+=1),b.quad6&&(f[v]=b.quad6,y+=1,v+=1),b.quad7&&(f[v]=b.quad7,y+=1,v+=1)))}t.force.x+=c,t.force.y+=d,t.force.z+=p},options:function(t){return t?("number"==typeof t.gravity&&(i=t.gravity),"number"==typeof t.theta&&(l=t.theta),this):{gravity:i,theta:l}}}};function ne(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:4===e?t.quad4:5===e?t.quad5:6===e?t.quad6:7===e?t.quad7:null}function re(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e?t.quad3=n:4===e?t.quad4=n:5===e?t.quad5=n:6===e?t.quad6=n:7===e&&(t.quad7=n)}var oe=function(t,e){var n=Pt.random(42),r={x1:0,y1:0,z1:0,x2:0,y2:0,z2:0};return{box:r,update:function(){var e=t.length;if(0===e)return;var n=Number.MAX_VALUE,o=Number.MAX_VALUE,i=Number.MAX_VALUE,a=Number.MIN_VALUE,u=Number.MIN_VALUE,l=Number.MIN_VALUE;for(;e--;){var s=t[e];s.isPinned?(s.pos.x=s.prevPos.x,s.pos.y=s.prevPos.y,s.pos.z=s.prevPos.z):(s.prevPos.x=s.pos.x,s.prevPos.y=s.pos.y,s.prevPos.z=s.pos.z),s.pos.x<n&&(n=s.pos.x),s.pos.x>a&&(a=s.pos.x),s.pos.y<o&&(o=s.pos.y),s.pos.y>u&&(u=s.pos.y),s.pos.z<i&&(i=s.pos.z),s.pos.z>l&&(l=s.pos.z)}r.x1=n,r.x2=a,r.y1=o,r.y2=u,r.z1=i,r.z2=l},reset:function(){r.x1=r.y1=0,r.x2=r.y2=0,r.z1=r.z2=0},getBestNewPosition:function(t){var o=r,i=0,a=0,u=0;if(t.length){for(var l=0;l<t.length;++l)i+=t[l].pos.x,a+=t[l].pos.y,u+=t[l].pos.z;i/=t.length,a/=t.length,u/=t.length}else i=(o.x1+o.x2)/2,a=(o.y1+o.y2)/2,u=(o.z1+o.z2)/2;var s=e.springLength;return{x:i+n.next(s)-s/2,y:a+n.next(s)-s/2,z:u+n.next(s)-s/2}}}},ie=function(t){var e={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y,e.force.z-=t.dragCoeff*e.velocity.z}};return kt(t=Ot(t,{dragCoeff:.02}),e,["dragCoeff"]),e},ae=function(t){var e=Ot,n=Pt.random(42),r={update:function(e){var r=e.from,o=e.to,i=e.length<0?t.springLength:e.length,a=o.pos.x-r.pos.x,u=o.pos.y-r.pos.y,l=o.pos.z-r.pos.z,s=Math.sqrt(a*a+u*u+l*l);0===s&&(a=(n.nextDouble()-.5)/50,u=(n.nextDouble()-.5)/50,l=(n.nextDouble()-.5)/50,s=Math.sqrt(a*a+u*u+l*l));var f=s-i,c=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*f/s*e.weight;r.force.x+=c*a,r.force.y+=c*u,r.force.z+=c*l,o.force.x-=c*a,o.force.y-=c*u,o.force.z-=c*l}};return kt(t=e(t,{springCoeff:2e-4,springLength:80}),r,["springCoeff","springLength"]),r},ue=function(t){return new It.Body3d(t)},le=function(t,e){var n,r=0,o=0,i=0,a=t.length;for(n=0;n<a;++n){var u=t[n],l=e*e/u.mass;u.pos.x=2*u.pos.x-u.prevPos.x+u.force.x*l,u.pos.y=2*u.pos.y-u.prevPos.y+u.force.y*l,u.pos.z=2*u.pos.z-u.prevPos.z+u.force.z*l,r+=Math.abs(u.pos.x-u.prevPos.x),o+=Math.abs(u.pos.y-u.prevPos.y),i+=Math.abs(u.pos.z-u.prevPos.z)}return(r*r+o*o+i*i)/t.length};var se=function(t,e){var n,r=0,o=0,i=0,a=0,u=0,l=0,s=t.length;for(n=0;n<s;++n){var f=t[n],c=e/f.mass;f.velocity.x+=c*f.force.x,f.velocity.y+=c*f.force.y,f.velocity.z+=c*f.force.z;var h=f.velocity.x,d=f.velocity.y,p=f.velocity.z,y=Math.sqrt(h*h+d*d+p*p);y>1&&(f.velocity.x=h/y,f.velocity.y=d/y,f.velocity.z=p/y),r=e*f.velocity.x,i=e*f.velocity.y,u=e*f.velocity.z,f.pos.x+=r,f.pos.y+=i,f.pos.z+=u,o+=Math.abs(r),a+=Math.abs(i),l+=Math.abs(u)}return(o*o+a*a+l*l)/t.length};var fe=ce;function ce(t,e){return e=Ot(e,{createQuadTree:ee,createBounds:oe,createDragForce:ie,createSpringForce:ae,integrator:he(e),createBody:ue}),ce.get2dLayout(t,e)}function he(t){return t&&"verlet"===t.integrator?le:se}function de(t,e,n){var r,o,i,a,u;function l(){var s=Date.now()-a;s<e&&s>=0?r=setTimeout(l,e-s):(r=null,n||(u=t.apply(i,o),i=o=null))}null==e&&(e=100);var s=function(){i=this,o=arguments,a=Date.now();var s=n&&!r;return r||(r=setTimeout(l,e)),s&&(u=t.apply(i,o),i=o=null),u};return s.clear=function(){r&&(clearTimeout(r),r=null)},s.flush=function(){r&&(u=t.apply(i,o),i=o=null,clearTimeout(r),r=null)},s}ce.get2dLayout=Wt,de.debounce=de;var pe=de;function ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ge=function t(e,n){var r=n.default,o=void 0===r?null:r,i=n.triggerUpdate,a=void 0===i||i,u=n.onChange,l=void 0===u?function(t,e){}:u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.defaultVal=o,this.triggerUpdate=a,this.onChange=l};function ve(t){var e=t.stateInit,n=void 0===e?function(){return{}}:e,r=t.props,o=void 0===r?{}:r,i=t.methods,a=void 0===i?{}:i,u=t.aliases,l=void 0===u?{}:u,s=t.init,f=void 0===s?function(){}:s,c=t.update,h=void 0===c?function(){}:c,d=Object.keys(o).map((function(t){return new ge(t,o[t])}));return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},n instanceof Function?n(t):n,{initialised:!1}),r={};function o(e){return i(e,t),u(),o}var i=function(t,n){f.call(o,t,e,n),e.initialised=!0},u=pe((function(){e.initialised&&(h.call(o,e,r),r={})}),1);return d.forEach((function(t){o[t.name]=function(t){var n=t.name,i=t.triggerUpdate,a=void 0!==i&&i,l=t.onChange,s=void 0===l?function(t,e){}:l,f=t.defaultVal,c=void 0===f?null:f;return function(t){var i=e[n];if(!arguments.length)return i;var l=void 0===t?c:t;return e[n]=l,s.call(o,l,e,i),!r.hasOwnProperty(n)&&(r[n]=i),a&&u(),o}}(t)})),Object.keys(a).forEach((function(t){o[t]=function(){for(var n,r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return(n=a[t]).call.apply(n,[o,e].concat(i))}})),Object.entries(l).forEach((function(t){var e=ye(t,2),n=e[0],r=e[1];return o[n]=o[r]})),o.resetProps=function(){return d.forEach((function(t){o[t.name](t.defaultVal)})),o},o.resetProps(),e._rerender=u,o}}function be(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function me(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}function xe(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function _e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function we(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ke(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var Ae=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(e instanceof Array?e.length?e:[void 0]:[e]).map((function(t){return{keyAccessor:t,isProp:!(t instanceof Function)}})),i=t.reduce((function(t,e){var r=t,i=e;return o.forEach((function(t,e){var a,u=t.keyAccessor;if(t.isProp){var l=i,s=l[u],f=xe(l,[u].map(ke));a=s,i=f}else a=u(i,e);e+1<o.length?(r.hasOwnProperty(a)||(r[a]={}),r=r[a]):n?(r.hasOwnProperty(a)||(r[a]=[]),r[a].push(i)):r[a]=i})),t}),{});n instanceof Function&&function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===o.length?Object.keys(e).forEach((function(t){return e[t]=n(e[t])})):Object.values(e).forEach((function(e){return t(e,r+1)}))}(i);var a=i;return r&&(a=[],function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===o.length?a.push({keys:n,vals:e}):Object.entries(e).forEach((function(e){var r=_e(e,2),o=r[0],i=r[1];return t(i,[].concat(we(n),[o]))}))}(i),e instanceof Array&&0===e.length&&1===a.length&&(a[0].keys=[])),a};function Oe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pe(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Ee(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Me(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function De(t,e,n){var r=n.objBindAttr,o=void 0===r?"__obj":r,i=n.dataBindAttr,a=void 0===i?"__data":i,u=n.idAccessor,l=n.purge,s=void 0!==l&&l,f=function(t){return t.hasOwnProperty(a)},c=e.filter((function(t){return!f(t)})),h=e.filter(f).map((function(t){return t[a]})),d=s?{enter:t,exit:h,update:[]}:function(t,e,n){var r={enter:[],update:[],exit:[]};if(n){var o=Ae(t,n,!1),i=Ae(e,n,!1),a=Object.assign({},o,i);Object.entries(a).forEach((function(t){var e=Ee(t,2),n=e[0],a=e[1],u=o.hasOwnProperty(n)?i.hasOwnProperty(n)?"update":"exit":"enter";r[u].push("update"===u?[o[n],i[n]]:a)}))}else{var u=new Set(t),l=new Set(e);new Set([].concat(Me(u),Me(l))).forEach((function(t){var e=u.has(t)?l.has(t)?"update":"exit":"enter";r[e].push("update"===e?[t,t]:t)}))}return r}(h,t,u);return d.update=d.update.map((function(t){var e=Ee(t,2),n=e[0],r=e[1];return n!==r&&(r[o]=n[o],r[o][a]=r),r})),d.exit=d.exit.concat(c.map((function(t){return Oe({},o,t)}))),d}function ze(t,e,n,r,o){var i=o.createObj,a=void 0===i?function(t){return{}}:i,u=o.updateObj,l=void 0===u?function(t,e){}:u,s=o.exitObj,f=void 0===s?function(t){}:s,c=o.objBindAttr,h=void 0===c?"__obj":c,d=o.dataBindAttr,p=void 0===d?"__data":d,y=Pe(o,["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"]),g=De(t,e,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(Object(n),!0).forEach((function(e){Oe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({objBindAttr:h,dataBindAttr:p},y)),v=g.enter,b=g.update;g.exit.forEach((function(t){var e=t[h];delete t[h],f(e),r(e)}));var m=function(t){var e=[];return t.forEach((function(t){var n=a(t);n&&(n[p]=t,t[h]=n,e.push(n))})),e}(v);!function(t){t.forEach((function(t){var e=t[h];e&&(e[p]=t,l(e,t))}))}([].concat(Me(v),Me(b))),m.forEach(n)}function Ne(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const Ce=Symbol("implicit");var Te=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Se=jt((function(t){!function(e){var n=/^\s+/,r=/\s+$/,o=0,i=e.round,a=e.min,u=e.max,l=e.random;function s(t,l){if(l=l||{},(t=t||"")instanceof s)return t;if(!(this instanceof s))return new s(t,l);var f=function(t){var o={r:0,g:0,b:0},i=1,l=null,s=null,f=null,c=!1,h=!1;"string"==typeof t&&(t=function(t){t=t.replace(n,"").replace(r,"").toLowerCase();var e,o=!1;if(P[t])t=P[t],o=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=I.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=I.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=I.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=I.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=I.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=I.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=I.hex8.exec(t))return{r:N(e[1]),g:N(e[2]),b:N(e[3]),a:q(e[4]),format:o?"name":"hex8"};if(e=I.hex6.exec(t))return{r:N(e[1]),g:N(e[2]),b:N(e[3]),format:o?"name":"hex"};if(e=I.hex4.exec(t))return{r:N(e[1]+""+e[1]),g:N(e[2]+""+e[2]),b:N(e[3]+""+e[3]),a:q(e[4]+""+e[4]),format:o?"name":"hex8"};if(e=I.hex3.exec(t))return{r:N(e[1]+""+e[1]),g:N(e[2]+""+e[2]),b:N(e[3]+""+e[3]),format:o?"name":"hex"};return!1}(t));"object"==typeof t&&(F(t.r)&&F(t.g)&&F(t.b)?(d=t.r,p=t.g,y=t.b,o={r:255*D(d,255),g:255*D(p,255),b:255*D(y,255)},c=!0,h="%"===String(t.r).substr(-1)?"prgb":"rgb"):F(t.h)&&F(t.s)&&F(t.v)?(l=T(t.s),s=T(t.v),o=function(t,n,r){t=6*D(t,360),n=D(n,100),r=D(r,100);var o=e.floor(t),i=t-o,a=r*(1-n),u=r*(1-i*n),l=r*(1-(1-i)*n),s=o%6;return{r:255*[r,u,a,a,l,r][s],g:255*[l,r,r,u,a,a][s],b:255*[a,a,l,r,r,u][s]}}(t.h,l,s),c=!0,h="hsv"):F(t.h)&&F(t.s)&&F(t.l)&&(l=T(t.s),f=T(t.l),o=function(t,e,n){var r,o,i;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=D(t,360),e=D(e,100),n=D(n,100),0===e)r=o=i=n;else{var u=n<.5?n*(1+e):n+e-n*e,l=2*n-u;r=a(l,u,t+1/3),o=a(l,u,t),i=a(l,u,t-1/3)}return{r:255*r,g:255*o,b:255*i}}(t.h,l,f),c=!0,h="hsl"),t.hasOwnProperty("a")&&(i=t.a));var d,p,y;return i=M(i),{ok:c,format:t.format||h,r:a(255,u(o.r,0)),g:a(255,u(o.g,0)),b:a(255,u(o.b,0)),a:i}}(t);this._originalInput=t,this._r=f.r,this._g=f.g,this._b=f.b,this._a=f.a,this._roundA=i(100*this._a)/100,this._format=l.format||f.format,this._gradientType=l.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=f.ok,this._tc_id=o++}function f(t,e,n){t=D(t,255),e=D(e,255),n=D(n,255);var r,o,i=u(t,e,n),l=a(t,e,n),s=(i+l)/2;if(i==l)r=o=0;else{var f=i-l;switch(o=s>.5?f/(2-i-l):f/(i+l),i){case t:r=(e-n)/f+(e<n?6:0);break;case e:r=(n-t)/f+2;break;case n:r=(t-e)/f+4}r/=6}return{h:r,s:o,l:s}}function c(t,e,n){t=D(t,255),e=D(e,255),n=D(n,255);var r,o,i=u(t,e,n),l=a(t,e,n),s=i,f=i-l;if(o=0===i?0:f/i,i==l)r=0;else{switch(i){case t:r=(e-n)/f+(e<n?6:0);break;case e:r=(n-t)/f+2;break;case n:r=(t-e)/f+4}r/=6}return{h:r,s:o,v:s}}function h(t,e,n,r){var o=[C(i(t).toString(16)),C(i(e).toString(16)),C(i(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function d(t,e,n,r){return[C(S(r)),C(i(t).toString(16)),C(i(e).toString(16)),C(i(n).toString(16))].join("")}function p(t,e){e=0===e?0:e||10;var n=s(t).toHsl();return n.s-=e/100,n.s=z(n.s),s(n)}function y(t,e){e=0===e?0:e||10;var n=s(t).toHsl();return n.s+=e/100,n.s=z(n.s),s(n)}function g(t){return s(t).desaturate(100)}function v(t,e){e=0===e?0:e||10;var n=s(t).toHsl();return n.l+=e/100,n.l=z(n.l),s(n)}function b(t,e){e=0===e?0:e||10;var n=s(t).toRgb();return n.r=u(0,a(255,n.r-i(-e/100*255))),n.g=u(0,a(255,n.g-i(-e/100*255))),n.b=u(0,a(255,n.b-i(-e/100*255))),s(n)}function m(t,e){e=0===e?0:e||10;var n=s(t).toHsl();return n.l-=e/100,n.l=z(n.l),s(n)}function x(t,e){var n=s(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,s(n)}function _(t){var e=s(t).toHsl();return e.h=(e.h+180)%360,s(e)}function w(t){var e=s(t).toHsl(),n=e.h;return[s(t),s({h:(n+120)%360,s:e.s,l:e.l}),s({h:(n+240)%360,s:e.s,l:e.l})]}function k(t){var e=s(t).toHsl(),n=e.h;return[s(t),s({h:(n+90)%360,s:e.s,l:e.l}),s({h:(n+180)%360,s:e.s,l:e.l}),s({h:(n+270)%360,s:e.s,l:e.l})]}function A(t){var e=s(t).toHsl(),n=e.h;return[s(t),s({h:(n+72)%360,s:e.s,l:e.l}),s({h:(n+216)%360,s:e.s,l:e.l})]}function O(t,e,n){e=e||6,n=n||30;var r=s(t).toHsl(),o=360/n,i=[s(t)];for(r.h=(r.h-(o*e>>1)+720)%360;--e;)r.h=(r.h+o)%360,i.push(s(r));return i}function j(t,e){e=e||6;for(var n=s(t).toHsv(),r=n.h,o=n.s,i=n.v,a=[],u=1/e;e--;)a.push(s({h:r,s:o,v:i})),i=(i+u)%1;return a}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,n,r,o=this.toRgb();return t=o.r/255,n=o.g/255,r=o.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:e.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=M(t),this._roundA=i(100*this._a)/100,this},toHsv:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=c(this._r,this._g,this._b),e=i(360*t.h),n=i(100*t.s),r=i(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=f(this._r,this._g,this._b),e=i(360*t.h),n=i(100*t.s),r=i(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,o){var a=[C(i(t).toString(16)),C(i(e).toString(16)),C(i(n).toString(16)),C(S(r))];if(o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*D(this._r,255))+"%",g:i(100*D(this._g,255))+"%",b:i(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*D(this._r,255))+"%, "+i(100*D(this._g,255))+"%, "+i(100*D(this._b,255))+"%)":"rgba("+i(100*D(this._r,255))+"%, "+i(100*D(this._g,255))+"%, "+i(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(E[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var o=s(t);n="#"+d(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return s(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(j,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},s.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:T(t[r]));t=n}return s(t,e)},s.equals=function(t,e){return!(!t||!e)&&s(t).toRgbString()==s(e).toRgbString()},s.random=function(){return s.fromRatio({r:l(),g:l(),b:l()})},s.mix=function(t,e,n){n=0===n?0:n||50;var r=s(t).toRgb(),o=s(e).toRgb(),i=n/100;return s({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},
// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)
// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)
s.readability=function(t,n){var r=s(t),o=s(n);return(e.max(r.getLuminance(),o.getLuminance())+.05)/(e.min(r.getLuminance(),o.getLuminance())+.05)},s.isReadable=function(t,e,n){var r,o,i=s.readability(t,e);switch(o=!1,(r=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},s.mostReadable=function(t,e,n){var r,o,i,a,u=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var f=0;f<e.length;f++)(r=s.readability(t,e[f]))>l&&(l=r,u=s(e[f]));return s.isReadable(t,u,{level:i,size:a})||!o?u:(n.includeFallbackColors=!1,s.mostReadable(t,["#fff","#000"],n))};var P=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},E=s.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(P);function M(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function D(t,n){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=a(n,u(0,parseFloat(t))),r&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function z(t){return a(1,u(0,t))}function N(t){return parseInt(t,16)}function C(t){return 1==t.length?"0"+t:""+t}function T(t){return t<=1&&(t=100*t+"%"),t}function S(t){return e.round(255*parseFloat(t)).toString(16)}function q(t){return N(t)/255}var L,R,B,I=(R="[\\s|\\(]+("+(L="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+L+")[,|\\s]+("+L+")\\s*\\)?",B="[\\s|\\(]+("+L+")[,|\\s]+("+L+")[,|\\s]+("+L+")[,|\\s]+("+L+")\\s*\\)?",{CSS_UNIT:new RegExp(L),rgb:new RegExp("rgb"+R),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+R),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+R),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function F(t){return!!I.CSS_UNIT.exec(t)}t.exports?t.exports=s:window.tinycolor=s}(Math)}));function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Re(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Be(Object(n),!0).forEach((function(e){Re(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}function Ue(t){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ge(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function He(t,e,n){return(He=Ge()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&Ve(o,n.prototype),o}).apply(null,arguments)}function Xe(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function We(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ye(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?We(t):e}function $e(t){var e=Ge();return function(){var n,r=Ue(t);if(e){var o=Ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ye(this,n)}}function Qe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||Ze(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(t){return function(t){if(Array.isArray(t))return Ke(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Ze(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(t,e){if(t){if("string"==typeof t)return Ke(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(t,e):void 0}}function Ke(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var tn=function t(e){e.geometry&&e.geometry.dispose(),e.material&&function t(e){e instanceof Array?e.forEach(t):(e.map&&e.map.dispose(),e.dispose())}(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(t)},en=function(t){for(;t.children.length;){var e=t.children[0];t.remove(e),tn(e)}};function nn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.objFilter,o=void 0===r?function(){return!0}:r,i=Xe(n,["objFilter"]);return ze(t,e.children.filter(o),(function(t){return e.add(t)}),(function(t){e.remove(t),en(t)}),Ie({objBindAttr:"__threeObj"},i))}var rn=function(t){return isNaN(t)?parseInt(Se(t).toHex(),16):t},on=function(t){return isNaN(t)?Se(t).getAlpha():1},an=function t(){var e=new Map,n=[],r=[],o=Ce;function i(t){var i=t+"",a=e.get(i);if(!a){if(o!==Ce)return o;e.set(i,a=n.push(t))}return r[(a-1)%r.length]}return i.domain=function(t){if(!arguments.length)return n.slice();n=[],e=new Map;for(const r of t){const t=r+"";e.has(t)||e.set(t,n.push(r))}return i},i.range=function(t){return arguments.length?(r=Array.from(t),i):r.slice()},i.unknown=function(t){return arguments.length?(o=t,i):o},i.copy=function(){return t(n,r).unknown(o)},Ne.apply(i,arguments),i}(Te);function un(t,e,n){e&&"string"==typeof n&&t.filter((function(t){return!t[n]})).forEach((function(t){t[n]=an(e(t))}))}var ln=window.THREE?window.THREE:{Group:t.Group,Mesh:t.Mesh,MeshLambertMaterial:t.MeshLambertMaterial,Color:t.Color,BufferGeometry:t.BufferGeometry,BufferAttribute:t.BufferAttribute,Matrix4:t.Matrix4,Vector3:t.Vector3,SphereBufferGeometry:t.SphereBufferGeometry,CylinderBufferGeometry:t.CylinderBufferGeometry,TubeBufferGeometry:t.TubeBufferGeometry,ConeBufferGeometry:t.ConeBufferGeometry,Line:t.Line,LineBasicMaterial:t.LineBasicMaterial,QuadraticBezierCurve3:t.QuadraticBezierCurve3,CubicBezierCurve3:t.CubicBezierCurve3,Box3:t.Box3},sn={graph:gt,forcelayout:Wt,forcelayout3d:fe},fn=(new ln.BufferGeometry).setAttribute?"setAttribute":"addAttribute",cn=(new ln.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix";var hn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e){Fe(o,e);var r=$e(o);function o(){var e;Le(this,o);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return(e=r.call.apply(r,[this].concat(a))).__kapsuleInstance=t().apply(void 0,[].concat(Je(n?[We(e)]:[]),a)),e}return o}(e);return Object.keys(t()).forEach((function(t){return r.prototype[t]=function(){var e,n=(e=this.__kapsuleInstance)[t].apply(e,arguments);return n===this.__kapsuleInstance?this:n}})),r}(ve({props:{jsonUrl:{onChange:function(t,e){var n=this;t&&!e.fetchingJson&&(e.fetchingJson=!0,e.onLoading(),fetch(t).then((function(t){return t.json()})).then((function(t){e.fetchingJson=!1,e.onFinishLoading(t),n.graphData(t)})))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(t,e){(t.nodes.length||t.links.length)&&console.info("force-graph loading",t.nodes.length+" nodes",t.links.length+" links"),e.engineRunning=!1}},numDimensions:{default:3,onChange:function(t,e){var n=e.d3ForceLayout.force("charge");function r(t,e){t.forEach((function(t){delete t[e],delete t["v".concat(e)]}))}n&&n.strength(t>2?-60:-30),t<3&&r(e.graphData.nodes,"z"),t<2&&r(e.graphData.nodes,"y")}},dagMode:{onChange:function(t,e){!t&&"d3"===e.forceEngine&&(e.graphData.nodes||[]).forEach((function(t){return t.fx=t.fy=t.fz=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(t){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaDecay(t)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaTarget(t)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.velocityDecay(t)}},ngraphPhysics:{},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(t){return t._flushObjects=!0,t._rerender(),this},d3Force:function(t,e,n){return void 0===n?t.d3ForceLayout.force(e):(t.d3ForceLayout.force(e,n),this)},d3ReheatSimulation:function(t){return t.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(t){return t.cntTicks=0,t.startTickTime=new Date,t.engineRunning=!0,this},tickFrame:function(t){var e,n,r,o,i="ngraph"!==t.forceEngine;return t.engineRunning&&function(){++t.cntTicks>t.cooldownTicks||new Date-t.startTickTime>t.cooldownTime||i&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin?(t.engineRunning=!1,t.onEngineStop()):(t.layout[i?"tick":"step"](),t.onEngineTick());t.graphData.nodes.forEach((function(e){var n=e.__threeObj;if(n){var r=i?e:t.layout.getNodePosition(e[t.nodeId]);n.position.x=r.x,n.position.y=r.y||0,n.position.z=r.z||0}}));var e=l(t.linkWidth),n=l(t.linkCurvature),r=l(t.linkCurveRotation),o=l(t.linkThreeObjectExtend);t.graphData.links.forEach((function(a){var u=a.__lineObj;if(u){var l=i?a:t.layout.getLinkPosition(t.layout.graph.getLink(a.source,a.target).id),s=l[i?"source":"from"],f=l[i?"target":"to"];if(s&&f&&s.hasOwnProperty("x")&&f.hasOwnProperty("x")){!function(e){var o=i?e:t.layout.getLinkPosition(t.layout.graph.getLink(e.source,e.target).id),a=o[i?"source":"from"],u=o[i?"target":"to"];if(a&&u&&a.hasOwnProperty("x")&&u.hasOwnProperty("x")){var l=n(e);if(l){var s,f=new ln.Vector3(a.x,a.y||0,a.z||0),c=new ln.Vector3(u.x,u.y||0,u.z||0),h=f.distanceTo(c),d=r(e);if(h>0){var p=u.x-a.x,y=u.y-a.y||0,g=(new ln.Vector3).subVectors(c,f),v=g.clone().multiplyScalar(l).cross(0!==p||0!==y?new ln.Vector3(0,0,1):new ln.Vector3(0,1,0)).applyAxisAngle(g.normalize(),d).add((new ln.Vector3).addVectors(f,c).divideScalar(2));s=new ln.QuadraticBezierCurve3(f,v,c)}else{var b=70*l,m=-d,x=m+Math.PI/2;s=new ln.CubicBezierCurve3(f,new ln.Vector3(b*Math.cos(x),b*Math.sin(x),0).add(f),new ln.Vector3(b*Math.cos(m),b*Math.sin(m),0).add(f),c)}e.__curve=s}else e.__curve=null}}(a);var c=o(a);if(!t.linkPositionUpdate||!t.linkPositionUpdate(c?u.children[1]:u,{start:{x:s.x,y:s.y,z:s.z},end:{x:f.x,y:f.y,z:f.z}},a)||c){var h=a.__curve,d=u.children.length?u.children[0]:u;if("Line"===d.type){if(h)d.geometry.setFromPoints(h.getPoints(30));else{var p=d.geometry.getAttribute("position");p&&p.array&&6===p.array.length||d.geometry[fn]("position",p=new ln.BufferAttribute(new Float32Array(6),3)),p.array[0]=s.x,p.array[1]=s.y||0,p.array[2]=s.z||0,p.array[3]=f.x,p.array[4]=f.y||0,p.array[5]=f.z||0,p.needsUpdate=!0}d.geometry.computeBoundingSphere()}else if("Mesh"===d.type)if(h){"TubeBufferGeometry"!==d.geometry.type&&(d.position.set(0,0,0),d.rotation.set(0,0,0),d.scale.set(1,1,1));var y=Math.ceil(10*e(a))/10/2,g=new ln.TubeBufferGeometry(h,30,y,t.linkResolution,!1);d.geometry.dispose(),d.geometry=g}else{if("CylinderBufferGeometry"!==d.geometry.type){var v=Math.ceil(10*e(a))/10/2,b=new ln.CylinderBufferGeometry(v,v,1,t.linkResolution,1,!1);b[cn]((new ln.Matrix4).makeTranslation(0,.5,0)),b[cn]((new ln.Matrix4).makeRotationX(Math.PI/2)),d.geometry.dispose(),d.geometry=b}var m=new ln.Vector3(s.x,s.y||0,s.z||0),x=new ln.Vector3(f.x,f.y||0,f.z||0),_=m.distanceTo(x);d.position.x=m.x,d.position.y=m.y,d.position.z=m.z,d.scale.z=_,d.parent.localToWorld(x),d.lookAt(x)}}}}}))}(),e=l(t.linkDirectionalArrowRelPos),n=l(t.linkDirectionalArrowLength),r=l(t.nodeVal),t.graphData.links.forEach((function(o){var a=o.__arrowObj;if(a){var u=i?o:t.layout.getLinkPosition(t.layout.graph.getLink(o.source,o.target).id),l=u[i?"source":"from"],s=u[i?"target":"to"];if(l&&s&&l.hasOwnProperty("x")&&s.hasOwnProperty("x")){var f=Math.sqrt(Math.max(0,r(l)||1))*t.nodeRelSize,c=Math.sqrt(Math.max(0,r(s)||1))*t.nodeRelSize,h=n(o),d=e(o),p=o.__curve?function(t){return o.__curve.getPoint(t)}:function(t){var e=function(t,e,n,r){return e[t]+(n[t]-e[t])*r||0};return{x:e("x",l,s,t),y:e("y",l,s,t),z:e("z",l,s,t)}},y=o.__curve?o.__curve.getLength():Math.sqrt(["x","y","z"].map((function(t){return Math.pow((s[t]||0)-(l[t]||0),2)})).reduce((function(t,e){return t+e}),0)),g=f+h+(y-f-c-h)*d,v=p(g/y),b=p((g-h)/y);["x","y","z"].forEach((function(t){return a.position[t]=b[t]}));var m=He(ln.Vector3,Je(["x","y","z"].map((function(t){return v[t]}))));a.parent.localToWorld(m),a.lookAt(m)}}})),o=l(t.linkDirectionalParticleSpeed),t.graphData.links.forEach((function(e){var n=e.__photonsObj&&e.__photonsObj.children,r=e.__singleHopPhotonsObj&&e.__singleHopPhotonsObj.children;if(r&&r.length||n&&n.length){var a=i?e:t.layout.getLinkPosition(t.layout.graph.getLink(e.source,e.target).id),u=a[i?"source":"from"],l=a[i?"target":"to"];if(u&&l&&u.hasOwnProperty("x")&&l.hasOwnProperty("x")){var s=o(e),f=e.__curve?function(t){return e.__curve.getPoint(t)}:function(t){var e=function(t,e,n,r){return e[t]+(n[t]-e[t])*r||0};return{x:e("x",u,l,t),y:e("y",u,l,t),z:e("z",u,l,t)}};[].concat(Je(n||[]),Je(r||[])).forEach((function(t,e){var r="singleHopPhotons"===t.parent.__linkThreeObjType;if(t.hasOwnProperty("__progressRatio")||(t.__progressRatio=r?0:e/n.length),t.__progressRatio+=s,t.__progressRatio>=1){if(r)return t.parent.remove(t),void en(t);t.__progressRatio=t.__progressRatio%1}var o=t.__progressRatio,i=f(o);["x","y","z"].forEach((function(e){return t.position[e]=i[e]}))}))}}})),this},emitParticle:function(t,e){if(e){if(!e.__singleHopPhotonsObj){var n=new ln.Group;n.__linkThreeObjType="singleHopPhotons",e.__singleHopPhotonsObj=n,t.graphScene.add(n)}var r=l(t.linkDirectionalParticleWidth),o=Math.ceil(10*r(e))/10/2,i=t.linkDirectionalParticleResolution,a=new ln.SphereBufferGeometry(o,i,i),u=l(t.linkColor),s=l(t.linkDirectionalParticleColor)(e)||u(e)||"#f0f0f0",f=new ln.Color(rn(s)),c=3*t.linkOpacity,h=new ln.MeshLambertMaterial({color:f,transparent:!0,opacity:c});e.__singleHopPhotonsObj.add(new ln.Mesh(a,h))}return this},getGraphBbox:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!t.initialised)return null;var n=function t(n){var r=[];if(n.geometry){n.geometry.computeBoundingBox();var o=new ln.Box3;o.copy(n.geometry.boundingBox).applyMatrix4(n.matrixWorld),r.push(o)}return r.concat.apply(r,Je((n.children||[]).filter((function(t){return!t.hasOwnProperty("__graphObjType")||"node"===t.__graphObjType&&e(t.__data)})).map(t)))}(t.graphScene);return n.length?Object.assign.apply(Object,Je(["x","y","z"].map((function(t){return Re({},t,[me(n,(function(e){return e.min[t]})),be(n,(function(e){return e.max[t]}))])})))):null}},stateInit:function(){return{d3ForceLayout:dt().force("link",R()).force("charge",pt()).force("center",s()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(t,e){e.graphScene=t},update:function(t,e){var n=function(t){return t.some((function(t){return e.hasOwnProperty(t)}))};if(t.engineRunning=!1,t.onUpdate(),null!==t.nodeAutoColorBy&&n(["nodeAutoColorBy","graphData","nodeColor"])&&un(t.graphData.nodes,l(t.nodeAutoColorBy),t.nodeColor),null!==t.linkAutoColorBy&&n(["linkAutoColorBy","graphData","linkColor"])&&un(t.graphData.links,l(t.linkAutoColorBy),t.linkColor),t._flushObjects||n(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var r=l(t.nodeThreeObject),o=l(t.nodeThreeObjectExtend),i=l(t.nodeVal),a=l(t.nodeColor),u=l(t.nodeVisibility),s={},f={};nn(t.graphData.nodes.filter(u),t.graphScene,{purge:t._flushObjects||n(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(t){return"node"===t.__graphObjType},createObj:function(e){var n,i=r(e),a=o(e);return i&&t.nodeThreeObject===i&&(i=i.clone()),i&&!a?n=i:((n=new ln.Mesh).__graphDefaultObj=!0,i&&a&&n.add(i)),n.__graphObjType="node",n},updateObj:function(e,n){if(e.__graphDefaultObj){var r=i(n)||1,o=Math.cbrt(r)*t.nodeRelSize,u=t.nodeResolution;"SphereBufferGeometry"===e.geometry.type&&e.geometry.parameters.radius===o&&e.geometry.parameters.widthSegments===u||(s.hasOwnProperty(r)||(s[r]=new ln.SphereBufferGeometry(o,u,u)),e.geometry.dispose(),e.geometry=s[r]);var l=a(n),c=new ln.Color(rn(l||"#ffffaa")),h=t.nodeOpacity*on(l);"MeshLambertMaterial"===e.material.type&&e.material.color.equals(c)&&e.material.opacity===h||(f.hasOwnProperty(l)||(f[l]=new ln.MeshLambertMaterial({color:c,transparent:!0,opacity:h})),e.material.dispose(),e.material=f[l])}}})}if(t._flushObjects||n(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var c=l(t.linkThreeObject),h=l(t.linkThreeObjectExtend),d=l(t.linkMaterial),p=l(t.linkVisibility),y=l(t.linkColor),g=l(t.linkWidth),v={},b={},m={},x=t.graphData.links.filter(p);if(nn(x,t.graphScene,{objBindAttr:"__lineObj",purge:t._flushObjects||n(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(t){return"link"===t.__graphObjType},createObj:function(e){var n,r,o=c(e),i=h(e);if(o&&t.linkThreeObject===o&&(o=o.clone()),!o||i)if(!!g(e))n=new ln.Mesh;else{var a=new ln.BufferGeometry;a[fn]("position",new ln.BufferAttribute(new Float32Array(6),3)),n=new ln.Line(a)}return o?i?((r=new ln.Group).__graphDefaultObj=!0,r.add(n),r.add(o)):r=o:(r=n).__graphDefaultObj=!0,r.renderOrder=10,r.__graphObjType="link",r},updateObj:function(e,n){if(e.__graphDefaultObj){var r=e.children.length?e.children[0]:e,o=Math.ceil(10*g(n))/10,i=!!o;if(i){var a=o/2,u=t.linkResolution;if("CylinderBufferGeometry"!==r.geometry.type||r.geometry.parameters.radiusTop!==a||r.geometry.parameters.radialSegments!==u){if(!v.hasOwnProperty(o)){var l=new ln.CylinderBufferGeometry(a,a,1,u,1,!1);l[cn]((new ln.Matrix4).makeTranslation(0,.5,0)),l[cn]((new ln.Matrix4).makeRotationX(Math.PI/2)),v[o]=l}r.geometry.dispose(),r.geometry=v[o]}}var s=d(n);if(s)r.material=s;else{var f=y(n),c=new ln.Color(rn(f||"#f0f0f0")),h=t.linkOpacity*on(f),p=i?"MeshLambertMaterial":"LineBasicMaterial";if(r.material.type!==p||!r.material.color.equals(c)||r.material.opacity!==h){var x=i?b:m;x.hasOwnProperty(f)||(x[f]=new ln[p]({color:c,transparent:h<1,opacity:h,depthWrite:h>=1})),r.material.dispose(),r.material=x[f]}}}}}),t.linkDirectionalArrowLength||e.hasOwnProperty("linkDirectionalArrowLength")){var _=l(t.linkDirectionalArrowLength),w=l(t.linkDirectionalArrowColor);nn(x.filter(_),t.graphScene,{objBindAttr:"__arrowObj",objFilter:function(t){return"arrow"===t.__linkThreeObjType},createObj:function(){var t=new ln.Mesh(void 0,new ln.MeshLambertMaterial({transparent:!0}));return t.__linkThreeObjType="arrow",t},updateObj:function(e,n){var r=_(n),o=t.linkDirectionalArrowResolution;if("ConeBufferGeometry"!==e.geometry.type||e.geometry.parameters.height!==r||e.geometry.parameters.radialSegments!==o){var i=new ln.ConeBufferGeometry(.25*r,r,o);i.translate(0,r/2,0),i.rotateX(Math.PI/2),e.geometry.dispose(),e.geometry=i}e.material.color=new ln.Color(w(n)||y(n)||"#f0f0f0"),e.material.opacity=3*t.linkOpacity}})}if(t.linkDirectionalParticles||e.hasOwnProperty("linkDirectionalParticles")){var k=l(t.linkDirectionalParticles),A=l(t.linkDirectionalParticleWidth),O=l(t.linkDirectionalParticleColor),j={},P={};nn(x.filter(k),t.graphScene,{objBindAttr:"__photonsObj",objFilter:function(t){return"photons"===t.__linkThreeObjType},createObj:function(){var t=new ln.Group;return t.__linkThreeObjType="photons",t},updateObj:function(e,n){var r,o=Math.round(Math.abs(k(n))),i=!!e.children.length&&e.children[0],a=Math.ceil(10*A(n))/10/2,u=t.linkDirectionalParticleResolution;i&&i.geometry.parameters.radius===a&&i.geometry.parameters.widthSegments===u?r=i.geometry:(P.hasOwnProperty(a)||(P[a]=new ln.SphereBufferGeometry(a,u,u)),r=P[a],i&&i.geometry.dispose());var l,s=O(n)||y(n)||"#f0f0f0",f=new ln.Color(rn(s)),c=3*t.linkOpacity;i&&i.material.color.equals(f)&&i.material.opacity===c?l=i.material:(j.hasOwnProperty(s)||(j[s]=new ln.MeshLambertMaterial({color:f,transparent:!0,opacity:c})),l=j[s],i&&i.material.dispose()),nn(Je(new Array(o)).map((function(t,e){return{idx:e}})),e,{idAccessor:function(t){return t.idx},createObj:function(){return new ln.Mesh(r,l)},updateObj:function(t){t.geometry=r,t.material=l}})}})}}if(t._flushObjects=!1,n(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){t.engineRunning=!1,t.graphData.links.forEach((function(e){e.source=e[t.linkSource],e.target=e[t.linkTarget]}));var E,M="ngraph"!==t.forceEngine;if(M){(E=t.d3ForceLayout).stop().alpha(1).numDimensions(t.numDimensions).nodes(t.graphData.nodes);var D=t.d3ForceLayout.force("link");D&&D.id((function(e){return e[t.nodeId]})).links(t.graphData.links);var z=t.dagMode&&function(t,e){var n=t.nodes,r=t.links,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.nodeFilter,a=void 0===i?function(){return!0}:i,u=o.onLoopError,l=void 0===u?function(t){throw"Invalid DAG structure! Found cycle in node path: ".concat(t.join(" -> "),".")}:u,s={};n.forEach((function(t){return s[e(t)]={data:t,out:[],depth:-1,skip:!a(t)}})),r.forEach((function(t){var n=t.source,r=t.target,o=l(n),i=l(r);if(!s.hasOwnProperty(o))throw"Missing source node with id: ".concat(o);if(!s.hasOwnProperty(i))throw"Missing target node with id: ".concat(i);var a=s[o],u=s[i];function l(t){return"object"===qe(t)?e(t):t}a.out.push(u)}));var f=[];h(Object.values(s));var c=Object.assign.apply(Object,[{}].concat(Je(Object.entries(s).filter((function(t){return!Qe(t,2)[1].skip})).map((function(t){var e=Qe(t,2);return Re({},e[0],e[1].depth)})))));return c;function h(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=0,i=t.length;o<i;o++){var a=t[o];if(-1!==n.indexOf(a)){var u=function(){var t=[].concat(Je(n.slice(n.indexOf(a))),[a]).map((function(t){return e(t.data)}));return f.some((function(e){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}))||(f.push(t),l(t)),"continue"}();if("continue"===u)continue}r>a.depth&&(a.depth=r,h(a.out,[].concat(Je(n),[a]),r+(a.skip?0:1)))}}}(t.graphData,(function(e){return e[t.nodeId]}),{nodeFilter:t.dagNodeFilter,onLoopError:t.onDagError||void 0}),N=Math.max.apply(Math,Je(Object.values(z||[]))),C=t.dagLevelDistance||t.graphData.nodes.length/(N||1)*2*(-1!==["radialin","radialout"].indexOf(t.dagMode)?.7:1);if(t.dagMode){var S=function(e,n){return function(r){return e?(z[r[t.nodeId]]-N/2)*C*(n?-1:1):void 0}},q=S(-1!==["lr","rl"].indexOf(t.dagMode),"rl"===t.dagMode),L=S(-1!==["td","bu"].indexOf(t.dagMode),"td"===t.dagMode),R=S(-1!==["zin","zout"].indexOf(t.dagMode),"zout"===t.dagMode);t.graphData.nodes.filter(t.dagNodeFilter).forEach((function(t){t.fx=q(t),t.fy=L(t),t.fz=R(t)}))}t.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(t.dagMode)?function(t,e,n,r){var o,i,a,u,l=T(.1);function s(t){for(var l=0,s=o.length;l<s;++l){var f=o[l],c=f.x-e||1e-6,h=(f.y||0)-n||1e-6,d=(f.z||0)-r||1e-6,p=Math.sqrt(c*c+h*h+d*d),y=(u[l]-p)*a[l]*t/p;f.vx+=c*y,i>1&&(f.vy+=h*y),i>2&&(f.vz+=d*y)}}function f(){if(o){var e,n=o.length;for(a=new Array(n),u=new Array(n),e=0;e<n;++e)u[e]=+t(o[e],e,o),a[e]=isNaN(u[e])?0:+l(o[e],e,o)}}return"function"!=typeof t&&(t=T(+t)),null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),s.initialize=function(t,e){o=t,i=e,f()},s.strength=function(t){return arguments.length?(l="function"==typeof t?t:T(+t),f(),s):l},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:T(+e),f(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s.z=function(t){return arguments.length?(r=+t,s):r},s}((function(e){var n=z[e[t.nodeId]]||-1;return("radialin"===t.dagMode?N-n:n)*C})).strength((function(e){return t.dagNodeFilter(e)?1:0})):null)}else{var B=sn.graph();t.graphData.nodes.forEach((function(e){B.addNode(e[t.nodeId])})),t.graphData.links.forEach((function(t){B.addLink(t.source,t.target)})),(E=sn["forcelayout"+(2===t.numDimensions?"":"3d")](B,t.ngraphPhysics||void 0)).graph=B}for(var I=0;I<t.warmupTicks&&!(M&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin);I++)E[M?"tick":"step"]();t.layout=E,this.resetCountdown()}t.engineRunning=!0,t.onFinishUpdate()}}),(window.THREE?window.THREE:{Group:t.Group}).Group,!0);if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var dn=l;dn.hasOwnProperty("default")&&(dn=dn.default);var pn=hn;pn.hasOwnProperty("default")&&(pn=pn.default);var yn=function(t){return"string"==typeof t?JSON.parse(t):t},gn=function(t){if("function"==typeof t)return t;var e=eval;try{return e("("+t+")")}catch(t){}return null},vn=function(t){return isNaN(parseFloat(t))?gn(t)?gn(t):t:parseFloat(t)};return AFRAME.registerComponent("forcegraph",{schema:{jsonUrl:{type:"string",default:""},nodes:{parse:yn,default:[]},links:{parse:yn,default:[]},numDimensions:{type:"number",default:3},dagMode:{type:"string",default:""},dagLevelDistance:{type:"number",default:0},dagNodeFilter:{parse:gn,function:()=>!0},onDagError:{parse:gn,default:void 0},nodeRelSize:{type:"number",default:4},nodeId:{type:"string",default:"id"},nodeLabel:{parse:vn,default:"name"},nodeDesc:{parse:vn,default:"desc"},nodeVal:{parse:vn,default:"val"},nodeResolution:{type:"number",default:8},nodeVisibility:{parse:vn,default:!0},nodeColor:{parse:vn,default:"color"},nodeAutoColorBy:{parse:vn,default:""},nodeOpacity:{type:"number",default:.75},nodeThreeObject:{parse:vn,default:null},nodeThreeObjectExtend:{parse:vn,default:!1},linkSource:{type:"string",default:"source"},linkTarget:{type:"string",default:"target"},linkLabel:{parse:vn,default:"name"},linkDesc:{parse:vn,default:"desc"},linkHoverPrecision:{type:"number",default:2},linkVisibility:{parse:vn,default:!0},linkColor:{parse:vn,default:"color"},linkAutoColorBy:{parse:vn,default:""},linkOpacity:{type:"number",default:.2},linkWidth:{parse:vn,default:0},linkResolution:{type:"number",default:6},linkCurvature:{parse:vn,default:0},linkCurveRotation:{parse:vn,default:0},linkMaterial:{parse:vn,default:null},linkThreeObject:{parse:vn,default:null},linkThreeObjectExtend:{parse:vn,default:!1},linkPositionUpdate:{parse:gn,default:null},linkDirectionalArrowLength:{parse:vn,default:0},linkDirectionalArrowColor:{parse:vn,default:null},linkDirectionalArrowRelPos:{parse:vn,default:.5},linkDirectionalArrowResolution:{type:"number",default:8},linkDirectionalParticles:{parse:vn,default:0},linkDirectionalParticleSpeed:{parse:vn,default:.01},linkDirectionalParticleWidth:{parse:vn,default:.5},linkDirectionalParticleColor:{parse:vn,default:null},linkDirectionalParticleResolution:{type:"number",default:4},onNodeCenterHover:{parse:gn,default:function(){}},onLinkCenterHover:{parse:gn,default:function(){}},forceEngine:{type:"string",default:"d3"},d3AlphaMin:{type:"number",default:0},d3AlphaDecay:{type:"number",default:.0228},d3VelocityDecay:{type:"number",default:.4},ngraphPhysics:{parse:yn,default:null},warmupTicks:{type:"int",default:0},cooldownTicks:{type:"int",default:1e18},cooldownTime:{type:"int",default:15e3},onEngineTick:{parse:gn,default:function(){}},onEngineStop:{parse:gn,default:function(){}}},getGraphBbox:function(){return this.forceGraph||(this.forceGraph=new pn),this.forceGraph.getGraphBbox()},emitParticle:function(){this.forceGraph||(this.forceGraph=new pn);const t=this.forceGraph,e=t.emitParticle.apply(t,arguments);return e===t?this:e},d3Force:function(){this.forceGraph||(this.forceGraph=new pn);const t=this.forceGraph,e=t.d3Force.apply(t,arguments);return e===t?this:e},d3ReheatSimulation:function(){return this.forceGraph&&this.forceGraph.d3ReheatSimulation(),this},refresh:function(){return this.forceGraph&&this.forceGraph.refresh(),this},init:function(){var t=this.state={};t.infoEl=document.createElement("a-text"),t.infoEl.setAttribute("position","0 -0.1 -1"),t.infoEl.setAttribute("width",1),t.infoEl.setAttribute("align","center"),t.infoEl.setAttribute("color","lavender"),t.tooltipEl=document.createElement("a-text"),t.tooltipEl.setAttribute("position","0 -0.5 -1"),t.tooltipEl.setAttribute("width",2),t.tooltipEl.setAttribute("align","center"),t.tooltipEl.setAttribute("color","lavender"),t.tooltipEl.setAttribute("value",""),t.subTooltipEl=document.createElement("a-text"),t.subTooltipEl.setAttribute("position","0 -0.6 -1"),t.subTooltipEl.setAttribute("width",1.5),t.subTooltipEl.setAttribute("align","center"),t.subTooltipEl.setAttribute("color","lavender"),t.subTooltipEl.setAttribute("value","");var e=document.querySelector("a-entity[camera], a-camera");e.appendChild(t.infoEl),e.appendChild(t.tooltipEl),e.appendChild(t.subTooltipEl),t.cameraObj=e.object3D.children.filter((function(t){return"PerspectiveCamera"===t.type}))[0],this.el.sceneEl.addEventListener("camera-set-active",(function(e){t.cameraObj=e.detail.cameraEl.components.camera.camera})),this.forceGraph||(this.forceGraph=new pn),this.el.object3D.add(this.forceGraph),this.forceGraph.onLoading((function(){t.infoEl.setAttribute("value","Loading...")})).onFinishLoading((function(){t.infoEl.setAttribute("value","")}))},remove:function(){this.state.infoEl.remove(),this.state.tooltipEl.remove(),this.state.subTooltipEl.remove()},update:function(t){var e=this,n=this.data,r=AFRAME.utils.diff(n,t);["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].filter((function(t){return t in r})).forEach((function(t){e.forceGraph[t](""!==n[t]?n[t]:null)})),("nodes"in r||"links"in r)&&e.forceGraph.graphData({nodes:n.nodes,links:n.links})},tick:function(t,e){var n=new THREE.Raycaster;n.linePrecision=this.data.linkHoverPrecision,n.setFromCamera(new THREE.Vector2(0,0),this.state.cameraObj);var r=n.intersectObjects(this.forceGraph.children).filter((function(t){return-1!==["node","link"].indexOf(t.object.__graphObjType)})).sort((function(t,e){return n(e)-n(t);function n(t){return"node"===t.object.__graphObjType}})),o=r.length?r[0].object:null;if(o!==this.state.hoverObj){const t=this.state.hoverObj?this.state.hoverObj.__graphObjType:null,e=this.state.hoverObj?this.state.hoverObj.__data:null,n=o?o.__graphObjType:null,r=o?o.__data:null;t&&t!==n&&this.data["on"+("node"===t?"Node":"Link")+"CenterHover"](null,e),n&&this.data["on"+("node"===n?"Node":"Link")+"CenterHover"](r,t===n?e:null),this.state.hoverObj=o,this.state.tooltipEl.setAttribute("value",o&&dn(this.data[o.__graphObjType+"Label"])(o.__data)||""),this.state.subTooltipEl.setAttribute("value",o&&dn(this.data[o.__graphObjType+"Desc"])(o.__data)||"")}this.forceGraph.tickFrame()}}),ve({props:{width:{},height:{},yOffset:{default:1.5},glScale:{default:200},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkHoverPrecision:{default:2},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},onNodeCenterHover:{},onLinkCenterHover:{},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:r(r({},Object.assign.apply(Object,[{}].concat(i(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map((function(t){return e({},t,(function(e){for(var n=e.forcegraph.components.forcegraph,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var a=n[t].apply(n,o);return a===n?this:a}))})))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.markerAttrs,i=void 0===r?{preset:"hiro"}:r;t.innerHTML="",e.container=document.createElement("div"),t.appendChild(e.container);var a=document.createElement("a-scene");a.setAttribute("embedded",""),a.setAttribute("arjs","debugUIEnabled: false;");var u=document.createElement("a-marker");Object.entries(i).forEach((function(t){var e=o(t,2),n=e[0],r=e[1];return u.setAttribute(n,r)})),a.appendChild(u),e.forcegraph=document.createElement("a-entity"),e.forcegraph.setAttribute("forcegraph",null),u.appendChild(e.forcegraph);var l=document.createElement("a-entity");l.setAttribute("camera",""),a.appendChild(l),e.container.appendChild(a)},update:function(t,n){n.hasOwnProperty("width")&&t.width&&(t.container.style.width=t.width),n.hasOwnProperty("height")&&t.height&&(t.container.style.height=t.height),n.hasOwnProperty("glScale")&&t.forcegraph.setAttribute("scale",i(new Array(3)).map((function(){return 1/t.glScale})).join(" ")),n.hasOwnProperty("yOffset")&&t.forcegraph.setAttribute("position","0 ".concat(t.yOffset," 0"));var r=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkHoverPrecision","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","onNodeCenterHover","onLinkCenterHover","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],a=Object.assign.apply(Object,[{}].concat(i(Object.entries(t).filter((function(t){var e=o(t,2),i=e[0],a=e[1];return n.hasOwnProperty(i)&&-1!=r.indexOf(i)&&null!=a})).map((function(t){var n=o(t,2);return e({},n[0],n[1])}))),i(Object.entries(t.graphData).map((function(t){var n=o(t,2);return e({},n[0],n[1])})))));t.forcegraph.setAttribute("forcegraph",a)}})}));
